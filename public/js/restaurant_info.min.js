"use strict";var restaurant,newMap;document.addEventListener("DOMContentLoaded",function(e){initMap()});var initMap=function(){fetchRestaurantFromURL(function(e,t){e||(self.newMap=L.map("map",{center:[t.latlng.lat,t.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYnJhZHl0Zm9yZCIsImEiOiJjamlydTVnZngwMXlhM3dxbTE2NzNhbWNjIn0.vP54TruwPoPWQLYZdPKcug",maxZoom:18,id:"mapbox.streets"}).addTo(newMap),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap)),document.querySelector("img.leaflet-marker-icon").setAttribute("aria-label","")})},fetchRestaurantFromURL=function(r){if(self.restaurant)r(null,self.restaurant);else{var t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,function(e,n){(self.restaurant=n)&&DBHelper.fetchReviewsByRestaurantId(t,function(e,t){self.restaurant.reviews=t,fillRestaurantHTML(),r(null,n)})}):(error="No restaurant id in URL",r(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("restaurant-name"),n=document.createElement("span"),r=!0===e.is_favorite?"star favorite":"star";n.setAttribute("onclick","toggleFavorite()"),n.setAttribute("class",r),t.innerHTML=e.name,t.append(n),document.getElementById("restaurant-address").innerHTML=e.address;var a=document.getElementById("restaurant-img");a.className="restaurant-img",a.alt=DBHelper.imageAltforRestaurant(e),a.src=DBHelper.imageUrlForRestaurant(e),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);var i=document.createElement("td");i.innerHTML=e[n],r.appendChild(i),t.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("div");n.setAttribute("id","titleBox");var r=document.createElement("h2");if(r.innerHTML="Reviews",n.append(r),t.prepend(n),!e){var a=document.createElement("p");return a.innerHTML="No reviews yet!",void n.appendChild(a)}for(var i=document.getElementById("reviews-list");i.firstChild;)i.removeChild(i.firstChild);e.forEach(function(e){i.appendChild(createReviewHTML(e))}),i.appendChild(createForm()),t.appendChild(i)},createReviewHTML=function(e){var t=document.createElement("article");t.setAttribute("tabindex",0);var n=document.createElement("h3");n.innerHTML=e.name,t.appendChild(n);var r=document.createElement("p");r.innerHTML=new Date(e.updatedAt).toLocaleString(),t.appendChild(r);var a=document.createElement("p");a.innerHTML="Rating: ".concat(e.rating),t.appendChild(a);var i=document.createElement("p");return i.innerHTML=e.comments,t.appendChild(i),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},createForm=function(){var e=document.createElement("article"),t=document.createElement("h2");t.innerHTML="Missing your favorite spot?",e.append(t);var n=document.createElement("h3");n.innerHTML="Add a restaurant to our listings below.",e.append(n);var r=document.createElement("form");r.setAttribute("action","javascript:void(0)"),r.setAttribute("onsubmit","submitReview()");var a=document.createElement("div"),i=document.createElement("label");i.innerHTML="Your Name",i.setAttribute("for","reviewerName"),a.append(i);var u=document.createElement("input");u.setAttribute("type","text"),u.setAttribute("name","reviewerName"),u.setAttribute("id","reviewerName"),u.setAttribute("required","required"),a.append(u),r.append(a);var l=document.createElement("div"),d=document.createElement("label");d.innerHTML="Rating (1-5)",d.setAttribute("for","newReviewRating"),l.append(d);var s=document.createElement("input");s.setAttribute("type","number"),s.setAttribute("min","1"),s.setAttribute("max","5"),s.setAttribute("name","newReviewRating"),s.setAttribute("id","newReviewRating"),s.setAttribute("required","required"),l.append(s),r.append(l);var m=document.createElement("div"),o=document.createElement("label");o.innerHTML="Comments",o.setAttribute("for","newReviewComments"),m.append(o);var c=document.createElement("textarea");c.setAttribute("name","newReviewComments"),c.setAttribute("id","newReviewComments"),c.setAttribute("rows","5"),c.setAttribute("required","required"),m.append(c),r.append(m);var p=document.createElement("button");return p.setAttribute("type","submit"),p.innerHTML="Submit",r.append(p),e.append(r),e},toggleFavorite=function(){var e=document.querySelector(".star");-1!==e.className.indexOf("favorite")?(e.className="star",DBHelper.sendToggleFav(self.restaurant.id,"false")):(e.className="star favorite",DBHelper.sendToggleFav(self.restaurant.id,"true"))},submitReview=function(){var e={id:self.restaurant.reviews.length+1,restaurant_id:self.restaurant.id,name:document.getElementById("reviewerName").value,createdAt:new Date,rating:parseInt(document.getElementById("newReviewRating").value),comments:document.getElementById("newReviewComments").value};DBHelper.addReviews(e),self.restaurant.reviews.push(e),fillReviewsHTML()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibmV3TWFwIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJpbml0TWFwIiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsImVycm9yIiwic2VsZiIsIkwiLCJtYXAiLCJjZW50ZXIiLCJsYXRsbmciLCJsYXQiLCJsbmciLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwidGlsZUxheWVyIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiaWQiLCJhZGRUbyIsImZpbGxCcmVhZGNydW1iIiwiREJIZWxwZXIiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50IiwicXVlcnlTZWxlY3RvciIsInNldEF0dHJpYnV0ZSIsImNhbGxiYWNrIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiZmV0Y2hSZXN0YXVyYW50QnlJZCIsImZldGNoUmV2aWV3c0J5UmVzdGF1cmFudElkIiwicmV2aWV3cyIsImZpbGxSZXN0YXVyYW50SFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm5hbWUiLCJnZXRFbGVtZW50QnlJZCIsInN0YXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NTdHJpbmciLCJpc19mYXZvcml0ZSIsImlubmVySFRNTCIsImFwcGVuZCIsImFkZHJlc3MiLCJpbWFnZSIsImNsYXNzTmFtZSIsImFsdCIsImltYWdlQWx0Zm9yUmVzdGF1cmFudCIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImN1aXNpbmVfdHlwZSIsIm9wZXJhdGluZ19ob3VycyIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwiZmlsbFJldmlld3NIVE1MIiwib3BlcmF0aW5nSG91cnMiLCJob3VycyIsImtleSIsInJvdyIsImRheSIsImFwcGVuZENoaWxkIiwidGltZSIsImNvbnRhaW5lciIsInRpdGxlQm94IiwidGl0bGUiLCJwcmVwZW5kIiwibm9SZXZpZXdzIiwidWwiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwicmV2aWV3IiwiY3JlYXRlUmV2aWV3SFRNTCIsImNyZWF0ZUZvcm0iLCJsaSIsImRhdGUiLCJEYXRlIiwidXBkYXRlZEF0IiwidG9Mb2NhbGVTdHJpbmciLCJyYXRpbmciLCJjb25jYXQiLCJjb21tZW50cyIsImJyZWFkY3J1bWIiLCJ1cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJyZXBsYWNlIiwicmVzdWx0cyIsIlJlZ0V4cCIsImV4ZWMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJhcnRpY2xlIiwiaGVhZGluZyIsInN1YmhlYWRpbmciLCJmb3JtIiwiZGl2MSIsImxhYmVsMSIsImlucHV0MSIsImRpdjIiLCJsYWJlbDIiLCJpbnB1dDIiLCJkaXYzIiwibGFiZWwzIiwiaW5wdXQzIiwiYnV0dG9uIiwidG9nZ2xlRmF2b3JpdGUiLCJ0aGlzU3RhciIsImluZGV4T2YiLCJzZW5kVG9nZ2xlRmF2Iiwic3VibWl0UmV2aWV3IiwicGFyYW1zIiwicmVzdGF1cmFudF9pZCIsInZhbHVlIiwiY3JlYXRlZEF0IiwicGFyc2VJbnQiLCJhZGRSZXZpZXdzIiwicHVzaCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBSUEsV0FDQUMsT0FLSkMsU0FBU0MsaUJBQWlCLG1CQUFvQixTQUFBQyxHQUM1Q0MsWUFNRixJQUFJQSxRQUFVLFdBQ1pDLHVCQUF1QixTQUFDQyxFQUFPUCxHQUN6Qk8sSUFJRkMsS0FBS1AsT0FBU1EsRUFBRUMsSUFBSSxNQUFPLENBQ3pCQyxPQUFRLENBQUNYLEVBQVdZLE9BQU9DLElBQUtiLEVBQVdZLE9BQU9FLEtBQ2xEQyxLQUFNLEdBQ05DLGlCQUFpQixJQUVuQlAsRUFBRVEsVUFDQSxvRkFDQSxDQUNFQyxZQUNFLGdHQUNGQyxRQUFTLEdBQ1RDLEdBQUksbUJBRU5DLE1BQU1wQixRQUNScUIsaUJBQ0FDLFNBQVNDLHVCQUF1QmhCLEtBQUtSLFdBQVlRLEtBQUtQLFNBR3hEQyxTQUNHdUIsY0FBYywyQkFDZEMsYUFBYSxhQUFj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OUUsYUFBYSxPQUFRLHFCQUM1QjhFLEVBQU85RSxhQUFhLEtBQU0scUJBQzFCOEUsRUFBTzlFLGFBQWEsT0FBUSxLQUM1QjhFLEVBQU85RSxhQUFhLFdBQVksWUFDaEM0RSxFQUFLM0QsT0FBTzZELEdBRVpULEVBQUtwRCxPQUFPMkQsR0FHWixJQUFNRyxFQUFTdkcsU0FBU3FDLGNBQWMsVUFRdEMsT0FQQWtFLEVBQU8vRSxhQUFhLE9BQVEsVUFDNUIrRSxFQUFPL0QsVUFBWSxTQUVuQnFELEVBQUtwRCxPQUFPOEQsR0FFWmIsRUFBUWpELE9BQU9vRCxHQUVSSCxHQUdMYyxlQUFpQixXQUNuQixJQUFJQyxFQUFXekcsU0FBU3VCLGNBQWMsVUFDVSxJQUE1Q2tGLEVBQVM3RCxVQUFVOEQsUUFBUSxhQUM3QkQsRUFBUzdELFVBQVksT0FDckJ2QixTQUFTc0YsY0FBY3JHLEtBQUtSLFdBQVdvQixHQUFJLFdBRTNDdUYsRUFBUzdELFVBQVksZ0JBQ3JCdkIsU0FBU3NGLGNBQWNyRyxLQUFLUixXQUFXb0IsR0FBSSxVQUszQzBGLGFBQWUsV0FDakIsSUFBSUMsRUFBUyxDQUNYM0YsR0FBSVosS0FBS1IsV0FBVytCLFFBQVFHLE9BQVMsRUFDckM4RSxjQUFleEcsS0FBS1IsV0FBV29CLEdBQy9CZ0IsS0FBTWxDLFNBQVNtQyxlQUFlLGdCQUFnQjRFLE1BQzlDQyxVQUFXLElBQUl0QyxLQUNmRyxPQUFRb0MsU0FBU2pILFNBQVNtQyxlQUFlLG1CQUFtQjRFLE9BQzVEaEMsU0FBVS9FLFNBQVNtQyxlQUFlLHFCQUFxQjRFLE9BR3pEMUYsU0FBUzZGLFdBQVdMLEdBQ3BCdkcsS0FBS1IsV0FBVytCLFFBQVFzRixLQUFLTixHQUM3QnpEIiwiZmlsZSI6InJlc3RhdXJhbnRfaW5mby5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgcmVzdGF1cmFudFxudmFyIG5ld01hcFxuXG4vKipcbiAqIEluaXRpYWxpemUgbWFwIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZXZlbnQgPT4ge1xuICBpbml0TWFwKClcbn0pXG5cbi8qKlxuICogSW5pdGlhbGl6ZSBsZWFmbGV0IG1hcFxuICovXG5sZXQgaW5pdE1hcCA9ICgpID0+IHtcbiAgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCgoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIC8vIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYubmV3TWFwID0gTC5tYXAoJ21hcCcsIHtcbiAgICAgICAgY2VudGVyOiBbcmVzdGF1cmFudC5sYXRsbmcubGF0LCByZXN0YXVyYW50LmxhdGxuZy5sbmddLFxuICAgICAgICB6b29tOiAxNixcbiAgICAgICAgc2Nyb2xsV2hlZWxab29tOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIEwudGlsZUxheWVyKFxuICAgICAgICAnaHR0cHM6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC97aWR9L3t6fS97eH0ve3l9LmpwZzcwP2FjY2Vzc190b2tlbj17bWFwYm94VG9rZW59JyxcbiAgICAgICAge1xuICAgICAgICAgIG1hcGJveFRva2VuOlxuICAgICAgICAgICAgJ3BrLmV5SjFJam9pWW5KaFpIbDBabTl5WkNJc0ltRWlPaUpqYW1seWRUVm5abmd3TVhsaE0zZHhiVEUyTnpOaGJXTmpJbjAudlA1NFRydXdQb1BXUUxZWmRQS2N1ZycsXG4gICAgICAgICAgbWF4Wm9vbTogMTgsXG4gICAgICAgICAgaWQ6ICdtYXBib3guc3RyZWV0cydcbiAgICAgICAgfVxuICAgICAgKS5hZGRUbyhuZXdNYXApXG4gICAgICBmaWxsQnJlYWRjcnVtYigpXG4gICAgICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHNlbGYucmVzdGF1cmFudCwgc2VsZi5uZXdNYXApXG4gICAgfVxuXG4gICAgZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdpbWcubGVhZmxldC1tYXJrZXItaWNvbicpXG4gICAgICAuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJycpXG4gIH0pXG59XG5cbi8qKlxuICogR2V0IGN1cnJlbnQgcmVzdGF1cmFudCBmcm9tIHBhZ2UgVVJMLlxuICovXG5sZXQgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCA9IGNhbGxiYWNrID0+IHtcbiAgaWYgKHNlbGYucmVzdGF1cmFudCkge1xuICAgIC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudClcbiAgICByZXR1cm5cbiAgfVxuICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKVxuICBpZiAoIWlkKSB7XG4gICAgLy8gbm8gaWQgZm91bmQgaW4gVVJMXG4gICAgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnXG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpXG4gIH0gZWxzZSB7XG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50XG4gICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcihlcnJvcilcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBEQkhlbHBlci5mZXRjaFJldmlld3NCeVJlc3RhdXJhbnRJZChpZCwgKGVycm9yLCByZXZpZXdzKSA9PiB7XG4gICAgICAgIHNlbGYucmVzdGF1cmFudC5yZXZpZXdzID0gcmV2aWV3c1xuICAgICAgICBmaWxsUmVzdGF1cmFudEhUTUwoKVxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSBwYWdlXG4gKi9cbmxldCBmaWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpXG4gIGNvbnN0IHN0YXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgY29uc3QgY2xhc3NTdHJpbmcgPSByZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09PSB0cnVlID8gJ3N0YXIgZmF2b3JpdGUnIDogJ3N0YXInXG4gIHN0YXIuc2V0QXR0cmlidXRlKCdvbmNsaWNrJywgJ3RvZ2dsZUZhdm9yaXRlKCknKVxuICBzdGFyLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc1N0cmluZylcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWVcbiAgbmFtZS5hcHBlbmQoc3RhcilcblxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtYWRkcmVzcycpXG4gIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzXG5cbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKVxuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnXG4gIGltYWdlLmFsdCA9IERCSGVscGVyLmltYWdlQWx0Zm9yUmVzdGF1cmFudChyZXN0YXVyYW50KVxuICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudClcblxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpXG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGVcblxuICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xuICBpZiAocmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpIHtcbiAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpXG4gIH1cbiAgLy8gZmlsbCByZXZpZXdzXG4gIGZpbGxSZXZpZXdzSFRNTCgpXG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgcGFnZS5cbiAqL1xubGV0IGZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKFxuICBvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnNcbikgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJylcbiAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKVxuXG4gICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKVxuICAgIGRheS5pbm5lckhUTUwgPSBrZXlcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KVxuXG4gICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJylcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV1cbiAgICByb3cuYXBwZW5kQ2hpbGQodGltZSlcblxuICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdylcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUganBnYWdlLlxuICovXG5sZXQgZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpXG4gIGNvbnN0IHRpdGxlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgdGl0bGVCb3guc2V0QXR0cmlidXRlKCdpZCcsICd0aXRsZUJveCcpXG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKVxuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cydcbiAgdGl0bGVCb3guYXBwZW5kKHRpdGxlKVxuICBjb250YWluZXIucHJlcGVuZCh0aXRsZUJveClcblxuICBpZiAoIXJldmlld3MpIHtcbiAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISdcbiAgICB0aXRsZUJveC5hcHBlbmRDaGlsZChub1Jldmlld3MpXG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0JylcbiAgd2hpbGUgKHVsLmZpcnN0Q2hpbGQpIHVsLnJlbW92ZUNoaWxkKHVsLmZpcnN0Q2hpbGQpXG4gIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSlcbiAgfSlcbiAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlRm9ybSgpKVxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpXG59XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIGpwZ2FnZS5cbiAqL1xubGV0IGNyZWF0ZVJldmlld0hUTUwgPSByZXZpZXcgPT4ge1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2FydGljbGUnKVxuICBsaS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMClcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJylcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZVxuICBsaS5hcHBlbmRDaGlsZChuYW1lKVxuXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgZGF0ZS5pbm5lckhUTUwgPSBuZXcgRGF0ZShyZXZpZXcudXBkYXRlZEF0KS50b0xvY2FsZVN0cmluZygpXG4gIGxpLmFwcGVuZENoaWxkKGRhdGUpXG5cbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gIHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YFxuICBsaS5hcHBlbmRDaGlsZChyYXRpbmcpXG5cbiAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzXG4gIGxpLmFwcGVuZENoaWxkKGNvbW1lbnRzKVxuXG4gIHJldHVybiBsaVxufVxuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cbmxldCBmaWxsQnJlYWRjcnVtYiA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKVxuICBsaS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWVcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSlcbn1cblxuLyoqXG4gKiBHZXQgYSBwYXJhbWV0ZXIgYnkgbmFtZSBmcm9tIHBhZ2UgVVJMLlxuICovXG5sZXQgZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xuICBpZiAoIXVybCkgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpXG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApLFxuICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybClcbiAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbFxuICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJ1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpXG59XG5cbi8qKlxuICpDcmVhdGUgZm9ybSB0aWxlLlxuICovXG5sZXQgY3JlYXRlRm9ybSA9ICgpID0+IHtcbiAgY29uc3QgYXJ0aWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2FydGljbGUnKVxuXG4gIC8vSGVhZGVyXG4gIGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpXG4gIGhlYWRpbmcuaW5uZXJIVE1MID0gJ01pc3NpbmcgeW91ciBmYXZvcml0ZSBzcG90PydcbiAgYXJ0aWNsZS5hcHBlbmQoaGVhZGluZylcbiAgY29uc3Qgc3ViaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJylcbiAgc3ViaGVhZGluZy5pbm5lckhUTUwgPSAnQWRkIGEgcmVzdGF1cmFudCB0byBvdXIgbGlzdGluZ3MgYmVsb3cuJ1xuICBhcnRpY2xlLmFwcGVuZChzdWJoZWFkaW5nKVxuXG4gIC8vRm9ybVxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpXG4gIGZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCAnamF2YXNjcmlwdDp2b2lkKDApJylcbiAgZm9ybS5zZXRBdHRyaWJ1dGUoJ29uc3VibWl0JywgJ3N1Ym1pdFJldmlldygpJylcblxuICAvL0ZpcnN0IElucHV0XG4gIGNvbnN0IGRpdjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gIGNvbnN0IGxhYmVsMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJylcbiAgbGFiZWwxLmlubmVySFRNTCA9ICdZb3VyIE5hbWUnXG4gIGxhYmVsMS5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdyZXZpZXdlck5hbWUnKVxuICBkaXYxLmFwcGVuZChsYWJlbDEpXG5cbiAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICBpbnB1dDEuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKVxuICBpbnB1dDEuc2V0QXR0cmlidXRlKCduYW1lJywgJ3Jldmlld2VyTmFtZScpXG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Jldmlld2VyTmFtZScpXG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ3JlcXVpcmVkJywgJ3JlcXVpcmVkJylcbiAgZGl2MS5hcHBlbmQoaW5wdXQxKVxuXG4gIGZvcm0uYXBwZW5kKGRpdjEpXG5cbiAgLy9TZWNvbmQgSW5wdXRcbiAgY29uc3QgZGl2MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgY29uc3QgbGFiZWwyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxuICBsYWJlbDIuaW5uZXJIVE1MID0gJ1JhdGluZyAoMS01KSdcbiAgbGFiZWwyLnNldEF0dHJpYnV0ZSgnZm9yJywgJ25ld1Jldmlld1JhdGluZycpXG4gIGRpdjIuYXBwZW5kKGxhYmVsMilcblxuICBjb25zdCBpbnB1dDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gIGlucHV0Mi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnbnVtYmVyJylcbiAgaW5wdXQyLnNldEF0dHJpYnV0ZSgnbWluJywgJzEnKVxuICBpbnB1dDIuc2V0QXR0cmlidXRlKCdtYXgnLCAnNScpXG4gIGlucHV0Mi5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnbmV3UmV2aWV3UmF0aW5nJylcbiAgaW5wdXQyLnNldEF0dHJpYnV0ZSgnaWQnLCAnbmV3UmV2aWV3UmF0aW5nJylcbiAgaW5wdXQyLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAncmVxdWlyZWQnKVxuICBkaXYyLmFwcGVuZChpbnB1dDIpXG5cbiAgZm9ybS5hcHBlbmQoZGl2MilcblxuICAvL0xhc3QgVXNlciBJbnB1dFxuICBjb25zdCBkaXYzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICBjb25zdCBsYWJlbDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXG4gIGxhYmVsMy5pbm5lckhUTUwgPSAnQ29tbWVudHMnXG4gIGxhYmVsMy5zZXRBdHRyaWJ1dGUoJ2ZvcicsICduZXdSZXZpZXdDb21tZW50cycpXG4gIGRpdjMuYXBwZW5kKGxhYmVsMylcblxuICBjb25zdCBpbnB1dDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXG4gIGlucHV0My5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnbmV3UmV2aWV3Q29tbWVudHMnKVxuICBpbnB1dDMuc2V0QXR0cmlidXRlKCdpZCcsICduZXdSZXZpZXdDb21tZW50cycpXG4gIGlucHV0My5zZXRBdHRyaWJ1dGUoJ3Jvd3MnLCAnNScpXG4gIGlucHV0My5zZXRBdHRyaWJ1dGUoJ3JlcXVpcmVkJywgJ3JlcXVpcmVkJylcbiAgZGl2My5hcHBlbmQoaW5wdXQzKVxuXG4gIGZvcm0uYXBwZW5kKGRpdjMpXG5cbiAgLy9zdWJtaXQgYnV0dG9uXG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnc3VibWl0JylcbiAgYnV0dG9uLmlubmVySFRNTCA9ICdTdWJtaXQnXG5cbiAgZm9ybS5hcHBlbmQoYnV0dG9uKVxuXG4gIGFydGljbGUuYXBwZW5kKGZvcm0pXG5cbiAgcmV0dXJuIGFydGljbGVcbn1cblxubGV0IHRvZ2dsZUZhdm9yaXRlID0gKCkgPT4ge1xuICBsZXQgdGhpc1N0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhcicpXG4gIGlmICh0aGlzU3Rhci5jbGFzc05hbWUuaW5kZXhPZignZmF2b3JpdGUnKSAhPT0gLTEpIHtcbiAgICB0aGlzU3Rhci5jbGFzc05hbWUgPSAnc3RhcidcbiAgICBEQkhlbHBlci5zZW5kVG9nZ2xlRmF2KHNlbGYucmVzdGF1cmFudC5pZCwgJ2ZhbHNlJylcbiAgfSBlbHNlIHtcbiAgICB0aGlzU3Rhci5jbGFzc05hbWUgPSAnc3RhciBmYXZvcml0ZSdcbiAgICBEQkhlbHBlci5zZW5kVG9nZ2xlRmF2KHNlbGYucmVzdGF1cmFudC5pZCwgJ3RydWUnKVxuICB9XG5cbn1cblxubGV0IHN1Ym1pdFJldmlldyA9ICgpID0+IHtcbiAgbGV0IHBhcmFtcyA9IHtcbiAgICBpZDogc2VsZi5yZXN0YXVyYW50LnJldmlld3MubGVuZ3RoICsgMSxcbiAgICByZXN0YXVyYW50X2lkOiBzZWxmLnJlc3RhdXJhbnQuaWQsXG4gICAgbmFtZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld2VyTmFtZScpLnZhbHVlLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICByYXRpbmc6IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdSZXZpZXdSYXRpbmcnKS52YWx1ZSksXG4gICAgY29tbWVudHM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdSZXZpZXdDb21tZW50cycpLnZhbHVlXG4gIH1cblxuICBEQkhlbHBlci5hZGRSZXZpZXdzKHBhcmFtcylcbiAgc2VsZi5yZXN0YXVyYW50LnJldmlld3MucHVzaChwYXJhbXMpXG4gIGZpbGxSZXZpZXdzSFRNTCgpXG5cbn0iXX0=
