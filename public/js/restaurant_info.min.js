"use strict";var restaurant,newMap;document.addEventListener("DOMContentLoaded",function(e){initMap()});var initMap=function(){fetchRestaurantFromURL(function(e,t){e||(self.newMap=L.map("map",{center:[t.latlng.lat,t.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYnJhZHl0Zm9yZCIsImEiOiJjamlydTVnZngwMXlhM3dxbTE2NzNhbWNjIn0.vP54TruwPoPWQLYZdPKcug",maxZoom:18,id:"mapbox.streets"}).addTo(newMap),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap)),document.querySelector("img.leaflet-marker-icon").setAttribute("aria-label","")})},fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)&&(fillRestaurantHTML(),n(null,t))}):(error="No restaurant id in URL",n(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img");t.className="restaurant-img",t.alt=DBHelper.imageAltforRestaurant(e),t.src=DBHelper.imageUrlForRestaurant(e),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var a=document.createElement("tr"),r=document.createElement("td");r.innerHTML=n,a.appendChild(r);var i=document.createElement("td");i.innerHTML=e[n],a.appendChild(i),t.appendChild(a)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("div");n.setAttribute("id","titleBox");var a=document.createElement("h2");if(a.innerHTML="Reviews",n.append(a),t.prepend(n),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void n.appendChild(r)}var i=document.getElementById("reviews-list");e.forEach(function(e){i.appendChild(createReviewHTML(e))}),t.appendChild(i)},createReviewHTML=function(e){var t=document.createElement("article");t.setAttribute("tabindex",0);var n=document.createElement("h3");n.innerHTML=e.name,t.appendChild(n);var a=document.createElement("p");a.innerHTML=e.date,t.appendChild(a);var r=document.createElement("p");r.innerHTML="Rating: ".concat(e.rating),t.appendChild(r);var i=document.createElement("p");return i.innerHTML=e.comments,t.appendChild(i),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibmV3TWFwIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJpbml0TWFwIiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsImVycm9yIiwic2VsZiIsIkwiLCJtYXAiLCJjZW50ZXIiLCJsYXRsbmciLCJsYXQiLCJsbmciLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwidGlsZUxheWVyIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiaWQiLCJhZGRUbyIsImZpbGxCcmVhZGNydW1iIiwiREJIZWxwZXIiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50IiwicXVlcnlTZWxlY3RvciIsInNldEF0dHJpYnV0ZSIsImNhbGxiYWNrIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiZmV0Y2hSZXN0YXVyYW50QnlJZCIsImZpbGxSZXN0YXVyYW50SFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwibmFtZSIsImFkZHJlc3MiLCJpbWFnZSIsImNsYXNzTmFtZSIsImFsdCIsImltYWdlQWx0Zm9yUmVzdGF1cmFudCIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImN1aXNpbmVfdHlwZSIsIm9wZXJhdGluZ19ob3VycyIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwiZmlsbFJldmlld3NIVE1MIiwib3BlcmF0aW5nSG91cnMiLCJob3VycyIsImtleSIsInJvdyIsImNyZWF0ZUVsZW1lbnQiLCJkYXkiLCJhcHBlbmRDaGlsZCIsInRpbWUiLCJyZXZpZXdzIiwiY29udGFpbmVyIiwidGl0bGVCb3giLCJ0aXRsZSIsImFwcGVuZCIsInByZXBlbmQiLCJub1Jldmlld3MiLCJ1bCIsImZvckVhY2giLCJyZXZpZXciLCJjcmVhdGVSZXZpZXdIVE1MIiwibGkiLCJkYXRlIiwicmF0aW5nIiwiY29uY2F0IiwiY29tbWVudHMiLCJicmVhZGNydW1iIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxXQUNBQyxPQUtKQyxTQUFTQyxpQkFBaUIsbUJBQW9CLFNBQUFDLEdBQzVDQyxZQU1GLElBQUlBLFFBQVUsV0FDWkMsdUJBQXVCLFNBQUNDLEVBQU9QLEdBQ3pCTyxJQUlGQyxLQUFLUCxPQUFTUSxFQUFFQyxJQUFJLE1BQU8sQ0FDekJDLE9BQVEsQ0FBQ1gsRUFBV1ksT0FBT0MsSUFBS2IsRUFBV1ksT0FBT0UsS0FDbERDLEtBQU0sR0FDTkMsaUJBQWlCLElBRW5CUCxFQUFFUSxVQUNBLG9GQUNBLENBQ0VDLFlBQ0UsZ0dBQ0ZDLFFBQVMsR0FDVEMsR0FBSSxtQkFFTkMsTUFBTXBCLFFBQ1JxQixpQkFDQUMsU0FBU0MsdUJBQXVCaEIsS0FBS1IsV0FBWVEsS0FBS1AsU0FHeERDLFNBQ0d1QixjQUFjLDJCQUNkQyxhQUFhLGFBQWMsT0FPOUJwQix1QkFBeUIsU0FBQXFCLEdBQzNCLEdBQUluQixLQUFLUixXQUVQMkIsRUFBUyxLQUFNbkIsS0FBS1IsZ0JBRnRCLENBS0EsSUFBTW9CLEVBQUtRLG1CQUFtQixNQUN6QlIsRUFLSEcsU0FBU00sb0JBQW9CVCxFQUFJLFNBQUNiLEVBQU9QLElBQ3ZDUSxLQUFLUixXQUFhQSxLQUtsQjhCLHFCQUNBSCxFQUFTLEtBQU0zQixPQVZqQk8sTUFBUSwwQkFDUm9CLEVBQVNwQixNQUFPLFNBaUJoQnVCLG1CQUFxQixXQUFrQyxJQUFqQzlCLEVBQWlDLEVBQUErQixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBcEJ2QixLQUFLUixXQUM3QkUsU0FBU2dDLGVBQWUsbUJBQ2hDQyxVQUFZbkMsRUFBV29DLEtBRVpsQyxTQUFTZ0MsZUFBZSxzQkFDaENDLFVBQVluQyxFQUFXcUMsUUFFL0IsSUFBTUMsRUFB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ImZpbGUiOiJyZXN0YXVyYW50X2luZm8ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHJlc3RhdXJhbnRcbnZhciBuZXdNYXBcblxuLyoqXG4gKiBJbml0aWFsaXplIG1hcCBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGV2ZW50ID0+IHtcbiAgaW5pdE1hcCgpXG59KVxuXG4vKipcbiAqIEluaXRpYWxpemUgbGVhZmxldCBtYXBcbiAqL1xubGV0IGluaXRNYXAgPSAoKSA9PiB7XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICAvLyBHb3QgYW4gZXJyb3IhXG4gICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLm5ld01hcCA9IEwubWFwKCdtYXAnLCB7XG4gICAgICAgIGNlbnRlcjogW3Jlc3RhdXJhbnQubGF0bG5nLmxhdCwgcmVzdGF1cmFudC5sYXRsbmcubG5nXSxcbiAgICAgICAgem9vbTogMTYsXG4gICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgIH0pXG4gICAgICBMLnRpbGVMYXllcihcbiAgICAgICAgJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQve2lkfS97en0ve3h9L3t5fS5qcGc3MD9hY2Nlc3NfdG9rZW49e21hcGJveFRva2VufScsXG4gICAgICAgIHtcbiAgICAgICAgICBtYXBib3hUb2tlbjpcbiAgICAgICAgICAgICdway5leUoxSWpvaVluSmhaSGwwWm05eVpDSXNJbUVpT2lKamFtbHlkVFZuWm5nd01YbGhNM2R4YlRFMk56TmhiV05qSW4wLnZQNTRUcnV3UG9QV1FMWVpkUEtjdWcnLFxuICAgICAgICAgIG1heFpvb206IDE4LFxuICAgICAgICAgIGlkOiAnbWFwYm94LnN0cmVldHMnXG4gICAgICAgIH1cbiAgICAgICkuYWRkVG8obmV3TWFwKVxuICAgICAgZmlsbEJyZWFkY3J1bWIoKVxuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubmV3TWFwKVxuICAgIH1cblxuICAgIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignaW1nLmxlYWZsZXQtbWFya2VyLWljb24nKVxuICAgICAgLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICcnKVxuICB9KVxufVxuXG4vKipcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cbiAqL1xubGV0IGZldGNoUmVzdGF1cmFudEZyb21VUkwgPSBjYWxsYmFjayA9PiB7XG4gIGlmIChzZWxmLnJlc3RhdXJhbnQpIHtcbiAgICAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcbiAgICBjYWxsYmFjayhudWxsLCBzZWxmLnJlc3RhdXJhbnQpXG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3QgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJylcbiAgaWYgKCFpZCkge1xuICAgIC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJ1xuICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKVxuICB9IGVsc2Uge1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudFxuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XG4gICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZmlsbFJlc3RhdXJhbnRIVE1MKClcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpXG4gICAgfSlcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUganBnYWdlXG4gKi9cbmxldCBmaWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lXG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKVxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzc1xuXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaW1nJylcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJ1xuICBpbWFnZS5hbHQgPSBEQkhlbHBlci5pbWFnZUFsdGZvclJlc3RhdXJhbnQocmVzdGF1cmFudClcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXG5cbiAgY29uc3QgY3Vpc2luZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWN1aXNpbmUnKVxuICBjdWlzaW5lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuY3Vpc2luZV90eXBlXG5cbiAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKVxuICB9XG4gIC8vIGZpbGwgcmV2aWV3c1xuICBmaWxsUmV2aWV3c0hUTUwoKVxufVxuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIGpwZ2FnZS5cbiAqL1xubGV0IGZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKFxuICBvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnNcbikgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJylcbiAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKVxuXG4gICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKVxuICAgIGRheS5pbm5lckhUTUwgPSBrZXlcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KVxuXG4gICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJylcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV1cbiAgICByb3cuYXBwZW5kQ2hpbGQodGltZSlcblxuICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdylcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUganBnYWdlLlxuICovXG5sZXQgZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpXG4gIGNvbnN0IHRpdGxlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgdGl0bGVCb3guc2V0QXR0cmlidXRlKCdpZCcsICd0aXRsZUJveCcpXG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKVxuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cydcbiAgdGl0bGVCb3guYXBwZW5kKHRpdGxlKVxuICBjb250YWluZXIucHJlcGVuZCh0aXRsZUJveClcblxuICBpZiAoIXJldmlld3MpIHtcbiAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISdcbiAgICB0aXRsZUJveC5hcHBlbmRDaGlsZChub1Jldmlld3MpXG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0JylcbiAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XG4gICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlUmV2aWV3SFRNTChyZXZpZXcpKVxuICB9KVxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpXG59XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIGpwZ2FnZS5cbiAqL1xubGV0IGNyZWF0ZVJldmlld0hUTUwgPSByZXZpZXcgPT4ge1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2FydGljbGUnKVxuICBsaS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMClcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJylcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZVxuICBsaS5hcHBlbmRDaGlsZChuYW1lKVxuXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgZGF0ZS5pbm5lckhUTUwgPSByZXZpZXcuZGF0ZVxuICBsaS5hcHBlbmRDaGlsZChkYXRlKVxuXG4gIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfWBcbiAgbGkuYXBwZW5kQ2hpbGQocmF0aW5nKVxuXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50c1xuICBsaS5hcHBlbmRDaGlsZChjb21tZW50cylcblxuICByZXR1cm4gbGlcbn1cblxuLyoqXG4gKiBBZGQgcmVzdGF1cmFudCBuYW1lIHRvIHRoZSBicmVhZGNydW1iIG5hdmlnYXRpb24gbWVudVxuICovXG5sZXQgZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBicmVhZGNydW1iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFkY3J1bWInKVxuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJylcbiAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lXG4gIGJyZWFkY3J1bWIuYXBwZW5kQ2hpbGQobGkpXG59XG5cbi8qKlxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAqL1xubGV0IGdldFBhcmFtZXRlckJ5TmFtZSA9IChuYW1lLCB1cmwpID0+IHtcbiAgaWYgKCF1cmwpIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKVxuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpXG4gIGlmICghcmVzdWx0cykgcmV0dXJuIG51bGxcbiAgaWYgKCFyZXN1bHRzWzJdKSByZXR1cm4gJydcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKVxufVxuIl19
