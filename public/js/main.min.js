"use strict";var restaurants,neighborhoods,cuisines,newMap,db,markers=[],fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,t){e||(self.neighborhoods=t,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,n=document.getElementById("neighborhoods-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,t){e||(self.cuisines=t,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,n=document.getElementById("cuisines-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})},initMap=function(){self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYnJhZHl0Zm9yZCIsImEiOiJjamlydTVnZngwMXlhM3dxbTE2NzNhbWNjIn0.vP54TruwPoPWQLYZdPKcug",maxZoom:18,id:"mapbox.streets"}).addTo(newMap),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,a=t.selectedIndex,r=e[n].value,o=t[a].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(r,o,function(e,t){e||(resetRestaurants(t),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(function(e){return e.remove()}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,t=document.getElementById("restaurants-list");e.forEach(function(e){t.append(createRestaurantHTML(e))}),t.append(createForm()),addMarkersToMap()},createRestaurantHTML=function(e){var t=document.createElement("article"),n=document.createElement("img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.alt=DBHelper.imageAltforRestaurant(e),t.append(n);var a=document.createElement("header"),r=document.createElement("h2");r.innerHTML=e.name,a.appendChild(r),t.append(a);var o=document.createElement("p");o.innerHTML=e.neighborhood,t.append(o);var i=document.createElement("p");i.innerHTML=e.address,t.append(i);var s=document.createElement("a");return s.innerHTML="View Details",s.href=DBHelper.urlForRestaurant(e),s.setAttribute("role","button"),t.append(s),t},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,self.newMap);function n(){window.location.href=t.options.url}t.on("click",n),t.on("keydown",function(e){alert(),event.preventDefault(),13===e.keyCode&&n()}),self.markers.push(t)}),document.querySelectorAll("img.leaflet-marker-icon").forEach(function(e){e.setAttribute("role","link")})},submitEntry=function(e){},createForm=function(){var e=document.createElement("article");e.setAttribute("id","form-tile");var t=document.createElement("header"),n=document.createElement("h2");n.innerHTML="Missing your favorite spot?",t.append(n);var a=document.createElement("h3");a.innerHTML="Add a restaurant to our listings below.",t.append(a),e.append(t);var r=document.createElement("form");r.setAttribute("action","javascript:void  (0)"),r.setAttribute("onsubmit","submitEntry(this)");var o=document.createElement("div"),i=document.createElement("label");i.innerHTML="Name of Establishment",i.setAttribute("for","newPlaceName"),o.append(i);var s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("name","newPlaceName"),s.setAttribute("id","newPlaceName"),o.append(s),e.append(o);var c=document.createElement("div"),u=document.createElement("label");u.innerHTML="Rating",u.setAttribute("for","newPlaceRating"),c.append(u);var l=document.createElement("input");l.setAttribute("type","number"),l.setAttribute("name","newPlaceRating"),l.setAttribute("id","newPlaceRating"),c.append(l),e.append(c);var d=document.createElement("div"),m=document.createElement("label");m.innerHTML="Comments",m.setAttribute("for","newPlaceComments"),d.append(m);var p=document.createElement("textarea");p.setAttribute("name","newPlaceComments"),p.setAttribute("id","newPlaceComments"),d.append(p),e.append(d);var f=document.createElement("button");return f.setAttribute("type","submit"),f.innerHTML="Submit",e.append(f),e.append(r),e};document.addEventListener("DOMContentLoaded",function(e){initMap(),fetchNeighborhoods(),fetchCuisines()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJuZXdNYXAiLCJkYiIsIm1hcmtlcnMiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJEQkhlbHBlciIsImVycm9yIiwic2VsZiIsImZpbGxOZWlnaGJvcmhvb2RzSFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInZhbHVlIiwiYXBwZW5kIiwiZmV0Y2hDdWlzaW5lcyIsImZpbGxDdWlzaW5lc0hUTUwiLCJjdWlzaW5lIiwiaW5pdE1hcCIsIkwiLCJtYXAiLCJjZW50ZXIiLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwidGlsZUxheWVyIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiaWQiLCJhZGRUbyIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtYXJrZXIiLCJyZW1vdmUiLCJ1bCIsInJlc3RhdXJhbnQiLCJjcmVhdGVSZXN0YXVyYW50SFRNTCIsImNyZWF0ZUZvcm0iLCJhZGRNYXJrZXJzVG9NYXAiLCJhcnQiLCJpbWFnZSIsImNsYXNzTmFtZSIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImFsdCIsImltYWdlQWx0Zm9yUmVzdGF1cmFudCIsImhlYWRlciIsIm5hbWUiLCJhcHBlbmRDaGlsZCIsImFkZHJlc3MiLCJtb3JlIiwiaHJlZiIsInVybEZvclJlc3RhdXJhbnQiLCJzZXRBdHRyaWJ1dGUiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50Iiwib25DbGljayIsIndpbmRvdyIsImxvY2F0aW9uIiwib3B0aW9ucyIsInVybCIsIm9uIiwiZSIsImFsZXJ0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImtleUNvZGUiLCJwdXNoIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW0iLCJzdWJtaXRFbnRyeSIsImZvcm0iLCJhcnRpY2xlIiwiaGVhZGluZyIsInN1YmhlYWRpbmciLCJkaXYxIiwibGFiZWwxIiwiaW5wdXQxIiwiZGl2MiIsImxhYmVsMiIsImlucHV0MiIsImRpdjMiLCJsYWJlbDMiLCJpbnB1dDMiLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxZQUNGQyxjQUNBQyxTQUNBQyxPQUVBQyxHQURBQyxRQUFVLEdBTVJDLG1CQUFxQixXQUN2QkMsU0FBU0QsbUJBQW1CLFNBQUNFLEVBQU9QLEdBQzlCTyxJQUlGQyxLQUFLUixjQUFnQkEsRUFDckJTLDRCQVFGQSxzQkFBd0IsV0FBd0MsSUFBdkNULEVBQXVDLEVBQUFVLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUF2QkYsS0FBS1IsY0FDMUNhLEVBQVNDLFNBQVNDLGVBQWUsd0JBQ3ZDZixFQUFjZ0IsUUFBUSxTQUFBQyxHQUNwQixJQUFNQyxFQUFTSixTQUFTSyxjQUFjLFVBQ3RDRCxFQUFPRSxVQUFZSCxFQUNuQkMsRUFBT0csTUFBUUosRUFDZkosRUFBT1MsT0FBT0osTUFPZEssY0FBZ0IsV0FDbEJqQixTQUFTaUIsY0FBYyxTQUFDaEIsRUFBT04sR0FDekJNLElBSUZDLEtBQUtQLFNBQVdBLEVBQ2hCdUIsdUJBUUZBLGlCQUFtQixXQUE4QixJQUE3QnZCLEVBQTZCLEVBQUFTLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFsQkYsS0FBS1AsU0FDaENZLEVBQVNDLFNBQVNDLGVBQWUsbUJBRXZDZCxFQUFTZSxRQUFRLFNBQUFTLEdBQ2YsSUFBTVAsRUFBU0os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QUMxQndCLEVBQUtyRSxPQUFPdUUsR0FFWlIsRUFBUS9ELE9BQU9xRSxHQUdmLElBQU1HLEVBQU9oRixTQUFTSyxjQUFjLE9BRTlCNEUsRUFBU2pGLFNBQVNLLGNBQWMsU0FDdEM0RSxFQUFPM0UsVUFBWSxXQUNuQjJFLEVBQU81QixhQUFhLE1BQU8sb0JBQzNCMkIsRUFBS3hFLE9BQU95RSxHQUVaLElBQU1DLEVBQVNsRixTQUFTSyxjQUFjLFlBQ3RDNkUsRUFBTzdCLGFBQWEsT0FBUSxvQkFDNUI2QixFQUFPN0IsYUFBYSxLQUFNLG9CQUMxQjJCLEVBQUt4RSxPQUFPMEUsR0FFWlgsRUFBUS9ELE9BQU93RSxHQUdmLElBQU1HLEVBQVNuRixTQUFTSyxjQUFjLFVBUXRDLE9BUEE4RSxFQUFPOUIsYUFBYSxPQUFRLFVBQzVCOEIsRUFBTzdFLFVBQVksU0FFbkJpRSxFQUFRL0QsT0FBTzJFLEdBRWZaLEVBQVEvRCxPQUFPOEQsR0FFUkMsR0FNVHZFLFNBQVNvRixpQkFBaUIsbUJBQW9CLFNBQUFyQixHQUM1Q25ELFVBQ0FyQixxQkFDQWtCIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHJlc3RhdXJhbnRzLFxyXG4gIG5laWdoYm9yaG9vZHMsXHJcbiAgY3Vpc2luZXMsXHJcbiAgbmV3TWFwLFxyXG4gIG1hcmtlcnMgPSBbXSxcclxuICBkYlxyXG5cclxuLyoqXHJcbiAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmxldCBmZXRjaE5laWdoYm9yaG9vZHMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hOZWlnaGJvcmhvb2RzKChlcnJvciwgbmVpZ2hib3Job29kcykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIC8vIEdvdCBhbiBlcnJvclxyXG4gICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kc1xyXG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgbmVpZ2hib3Job29kcyBIVE1MLlxyXG4gKi9cclxubGV0IGZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0JylcclxuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kXHJcbiAgICBvcHRpb24udmFsdWUgPSBuZWlnaGJvcmhvb2RcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxubGV0IGZldGNoQ3Vpc2luZXMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzXHJcbiAgICAgIGZpbGxDdWlzaW5lc0hUTUwoKVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgY3Vpc2luZXMgSFRNTC5cclxuICovXHJcbmxldCBmaWxsQ3Vpc2luZXNIVE1MID0gKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKVxyXG5cclxuICBjdWlzaW5lcy5mb3JFYWNoKGN1aXNpbmUgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJylcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBjdWlzaW5lXHJcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lXHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbilcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBsZWFmbGV0IG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cclxuICovXHJcbmxldCBpbml0TWFwID0gKCkgPT4ge1xyXG4gIHNlbGYubmV3TWFwID0gTC5tYXAoJ21hcCcsIHtcclxuICAgIGNlbnRlcjogWzQwLjcyMjIxNiwgLTczLjk4NzUwMV0sXHJcbiAgICB6b29tOiAxMixcclxuICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcclxuICB9KVxyXG4gIEwudGlsZUxheWVyKFxyXG4gICAgJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQve2lkfS97en0ve3h9L3t5fS5qcGc3MD9hY2Nlc3NfdG9rZW49e21hcGJveFRva2VufScsXHJcbiAgICB7XHJcbiAgICAgIG1hcGJveFRva2VuOlxyXG4gICAgICAgICdway5leUoxSWpvaVluSmhaSGwwWm05eVpDSXNJbUVpT2lKamFtbHlkVFZuWm5nd01YbGhNM2R4YlRFMk56TmhiV05qSW4wLnZQNTRUcnV3UG9QV1FMWVpkUEtjdWcnLFxyXG4gICAgICBtYXhab29tOiAxOCxcclxuICAgICAgaWQ6ICdtYXBib3guc3RyZWV0cydcclxuICAgIH1cclxuICApLmFkZFRvKG5ld01hcClcclxuXHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50cy5cclxuICovXHJcbmxldCB1cGRhdGVSZXN0YXVyYW50cyA9ICgpID0+IHtcclxuICBjb25zdCBjU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpXHJcbiAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpXHJcblxyXG4gIGNvbnN0IGNJbmRleCA9IGNTZWxlY3Quc2VsZWN0ZWRJbmRleFxyXG4gIGNvbnN0IG5JbmRleCA9IG5TZWxlY3Quc2VsZWN0ZWRJbmRleFxyXG5cclxuICBjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlXHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gblNlbGVjdFtuSW5kZXhdLnZhbHVlXHJcblxyXG4gIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChcclxuICAgIGN1aXNpbmUsXHJcbiAgICBuZWlnaGJvcmhvb2QsXHJcbiAgICAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpXHJcbiAgICAgICAgZmlsbFJlc3RhdXJhbnRzSFRNTCgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICApXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBjdXJyZW50IHJlc3RhdXJhbnRzLCB0aGVpciBIVE1MIGFuZCByZW1vdmUgdGhlaXIgbWFwIG1hcmtlcnMuXHJcbiAqL1xyXG5sZXQgcmVzZXRSZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzID0+IHtcclxuICAvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IFtdXHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpXHJcbiAgdWwuaW5uZXJIVE1MID0gJydcclxuXHJcbiAgLy8gUmVtb3ZlIGFsbCBtYXAgbWFya2Vyc1xyXG4gIGlmIChzZWxmLm1hcmtlcnMpIHtcclxuICAgIHNlbGYubWFya2Vycy5mb3JFYWNoKG1hcmtlciA9PiBtYXJrZXIucmVtb3ZlKCkpXHJcbiAgfVxyXG4gIHNlbGYubWFya2VycyA9IFtdXHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYWxsIHJlc3RhdXJhbnRzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSBqcGdhZ2UuXHJcbiAqL1xyXG5sZXQgZmlsbFJlc3RhdXJhbnRzSFRNTCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcclxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50cy1saXN0JylcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKVxyXG4gIH0pXHJcbiAgdWwuYXBwZW5kKGNyZWF0ZUZvcm0oKSlcclxuXHJcbiAgYWRkTWFya2Vyc1RvTWFwKClcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXHJcbiAqL1xyXG5sZXQgY3JlYXRlUmVzdGF1cmFudEhUTUwgPSByZXN0YXVyYW50ID0+IHtcclxuICBjb25zdCBhcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhcnRpY2xlJylcclxuXHJcbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gIGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZydcclxuICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudClcclxuICBpbWFnZS5hbHQgPSBEQkhlbHBlci5pbWFnZUFsdGZvclJlc3RhdXJhbnQocmVzdGF1cmFudClcclxuICBhcnQuYXBwZW5kKGltYWdlKVxyXG5cclxuICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoZWFkZXInKVxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpXHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWVcclxuICBoZWFkZXIuYXBwZW5kQ2hpbGQobmFtZSlcclxuICBhcnQuYXBwZW5kKGhlYWRlcilcclxuXHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgbmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kXHJcbiAgYXJ0LmFwcGVuZChuZWlnaGJvcmhvb2QpXHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcclxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzc1xyXG4gIGFydC5hcHBlbmQoYWRkcmVzcylcclxuXHJcbiAgY29uc3QgbW9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxyXG4gIG1vcmUuaW5uZXJIVE1MID0gJ1ZpZXcgRGV0YWlscydcclxuICBtb3JlLmhyZWYgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXHJcbiAgbW9yZS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJylcclxuXHJcbiAgYXJ0LmFwcGVuZChtb3JlKVxyXG5cclxuICByZXR1cm4gYXJ0XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxyXG4gKi9cclxubGV0IGFkZE1hcmtlcnNUb01hcCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXHJcbiAgICBjb25zdCBtYXJrZXIgPSBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNlbGYubmV3TWFwKVxyXG4gICAgbWFya2VyLm9uKCdjbGljaycsIG9uQ2xpY2spXHJcbiAgICBmdW5jdGlvbiBvbkNsaWNrKCkge1xyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci5vcHRpb25zLnVybFxyXG4gICAgfVxyXG4gICAgbWFya2VyLm9uKCdrZXlkb3duJywgZSA9PiB7XHJcbiAgICAgIGFsZXJ0KClcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykgb25DbGljaygpXHJcbiAgICB9KVxyXG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKVxyXG4gIH0pXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nLmxlYWZsZXQtbWFya2VyLWljb24nKS5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbGluaycpXHJcbiAgfSlcclxufVxyXG5cclxubGV0IHN1Ym1pdEVudHJ5ID0gKGZvcm0pID0+IHt9XHJcblxyXG5sZXQgY3JlYXRlRm9ybSA9ICgpID0+IHtcclxuICBjb25zdCBhcnRpY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXJ0aWNsZScpXHJcbiAgYXJ0aWNsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Zvcm0tdGlsZScpXHJcblxyXG4gIC8vSGVhZGVyXHJcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJylcclxuICBjb25zdCBoZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKVxyXG4gIGhlYWRpbmcuaW5uZXJIVE1MID0gJ01pc3NpbmcgeW91ciBmYXZvcml0ZSBzcG90PydcclxuICBoZWFkZXIuYXBwZW5kKGhlYWRpbmcpXHJcbiAgY29uc3Qgc3ViaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJylcclxuICBzdWJoZWFkaW5nLmlubmVySFRNTCA9ICdBZGQgYSByZXN0YXVyYW50IHRvIG91ciBsaXN0aW5ncyBiZWxvdy4nXHJcbiAgaGVhZGVyLmFwcGVuZChzdWJoZWFkaW5nKVxyXG4gIGFydGljbGUuYXBwZW5kKGhlYWRlcilcclxuXHJcbiAgLy9Gb3JtXHJcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKVxyXG4gIGZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCAnamF2YXNjcmlwdDp2b2lkICAoMCknKVxyXG4gIGZvcm0uc2V0QXR0cmlidXRlKCdvbnN1Ym1pdCcsICdzdWJtaXRFbnRyeSh0aGlzKScpXHJcblxyXG4gIC8vRmlyc3QgSW5wdXRcclxuICBjb25zdCBkaXYxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuXHJcbiAgY29uc3QgbGFiZWwxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxyXG4gIGxhYmVsMS5pbm5lckhUTUwgPSAnTmFtZSBvZiBFc3RhYmxpc2htZW50J1xyXG4gIGxhYmVsMS5zZXRBdHRyaWJ1dGUoJ2ZvcicsICduZXdQbGFjZU5hbWUnKVxyXG4gIGRpdjEuYXBwZW5kKGxhYmVsMSlcclxuXHJcbiAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxyXG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpXHJcbiAgaW5wdXQxLnNldEF0dHJpYnV0ZSgnbmFtZScsICduZXdQbGFjZU5hbWUnKVxyXG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ25ld1BsYWNlTmFtZScpXHJcbiAgZGl2MS5hcHBlbmQoaW5wdXQxKVxyXG5cclxuICBhcnRpY2xlLmFwcGVuZChkaXYxKVxyXG5cclxuICAvL1NlY29uZCBJbnB1dFxyXG4gIGNvbnN0IGRpdjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cclxuICBjb25zdCBsYWJlbDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXHJcbiAgbGFiZWwyLmlubmVySFRNTCA9ICdSYXRpbmcnXHJcbiAgbGFiZWwyLnNldEF0dHJpYnV0ZSgnZm9yJywgJ25ld1BsYWNlUmF0aW5nJylcclxuICBkaXYyLmFwcGVuZChsYWJlbDIpXHJcblxyXG4gIGNvbnN0IGlucHV0MiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcclxuICBpbnB1dDIuc2V0QXR0cmlidXRlKCd0eXBlJywgJ251bWJlcicpXHJcbiAgaW5wdXQyLnNldEF0dHJpYnV0ZSgnbmFtZScsICduZXdQbGFjZVJhdGluZycpXHJcbiAgaW5wdXQyLnNldEF0dHJpYnV0ZSgnaWQnLCAnbmV3UGxhY2VSYXRpbmcnKVxyXG4gIGRpdjIuYXBwZW5kKGlucHV0MilcclxuXHJcbiAgYXJ0aWNsZS5hcHBlbmQoZGl2MilcclxuXHJcbiAgLy9MYXN0IFVzZXIgSW5wdXRcclxuICBjb25zdCBkaXYzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuXHJcbiAgY29uc3QgbGFiZWwzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxyXG4gIGxhYmVsMy5pbm5lckhUTUwgPSAnQ29tbWVudHMnXHJcbiAgbGFiZWwzLnNldEF0dHJpYnV0ZSgnZm9yJywgJ25ld1BsYWNlQ29tbWVudHMnKVxyXG4gIGRpdjMuYXBwZW5kKGxhYmVsMylcclxuXHJcbiAgY29uc3QgaW5wdXQzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxyXG4gIGlucHV0My5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnbmV3UGxhY2VDb21tZW50cycpXHJcbiAgaW5wdXQzLnNldEF0dHJpYnV0ZSgnaWQnLCAnbmV3UGxhY2VDb21tZW50cycpXHJcbiAgZGl2My5hcHBlbmQoaW5wdXQzKVxyXG5cclxuICBhcnRpY2xlLmFwcGVuZChkaXYzKVxyXG5cclxuICAvL3N1Ym1pdCBidXR0b25cclxuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnc3VibWl0JylcclxuICBidXR0b24uaW5uZXJIVE1MID0gJ1N1Ym1pdCdcclxuXHJcbiAgYXJ0aWNsZS5hcHBlbmQoYnV0dG9uKVxyXG5cclxuICBhcnRpY2xlLmFwcGVuZChmb3JtKVxyXG5cclxuICByZXR1cm4gYXJ0aWNsZVxyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2ggbmVpZ2hib3Job29kcyBhbmQgY3Vpc2luZXMgYXMgc29vbiBhcyB0aGUgcGFnZSBpcyBsb2FkZWQuXHJcbiAqL1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZXZlbnQgPT4ge1xyXG4gIGluaXRNYXAoKSAvLyBhZGRlZFxyXG4gIGZldGNoTmVpZ2hib3Job29kcygpXHJcbiAgZmV0Y2hDdWlzaW5lcygpXHJcbn0pIl19
