"use strict";var restaurants,neighborhoods,cuisines,newMap,db,markers=[],fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,t){e||(self.neighborhoods=t,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,n=document.getElementById("neighborhoods-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,t){e||(self.cuisines=t,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,n=document.getElementById("cuisines-select");e.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e,n.append(t)})},initMap=function(){self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYnJhZHl0Zm9yZCIsImEiOiJjamlydTVnZngwMXlhM3dxbTE2NzNhbWNjIn0.vP54TruwPoPWQLYZdPKcug",maxZoom:18,id:"mapbox.streets"}).addTo(newMap),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),n=e.selectedIndex,a=t.selectedIndex,r=e[n].value,o=t[a].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(r,o,function(e,t){e||(resetRestaurants(t),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(function(e){return e.remove()}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,t=document.getElementById("restaurants-list");e.forEach(function(e){t.append(createRestaurantHTML(e))}),t.append(createForm()),addMarkersToMap()},createRestaurantHTML=function(e){var t=document.createElement("article"),n=document.createElement("img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.alt=DBHelper.imageAltforRestaurant(e),t.append(n);var a=document.createElement("header"),r=document.createElement("h2");r.innerHTML=e.name,a.appendChild(r),t.append(a);var o=document.createElement("p");o.innerHTML=e.neighborhood,t.append(o);var i=document.createElement("p");i.innerHTML=e.address,t.append(i);var s=document.createElement("a");return s.innerHTML="View Details",s.href=DBHelper.urlForRestaurant(e),s.setAttribute("role","button"),t.append(s),t},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var t=DBHelper.mapMarkerForRestaurant(e,self.newMap);function n(){window.location.href=t.options.url}t.on("click",n),t.on("keydown",function(e){alert(),event.preventDefault(),13===e.keyCode&&n()}),self.markers.push(t)}),document.querySelectorAll("img.leaflet-marker-icon").forEach(function(e){e.setAttribute("role","link")})},submitEntry=function(e){},createForm=function(){var e=document.createElement("article");e.setAttribute("id","form-tile");var t=document.createElement("header"),n=document.createElement("h2");n.innerHTML="Missing your favorite spot?",t.append(n);var a=document.createElement("h3");a.innerHTML="Add a restaurant to our listings below.",t.append(a),e.append(t);var r=document.createElement("form");r.setAttribute("action","javascript:void(0)"),r.setAttribute("onsubmit","submitEntry(this)");var o=document.createElement("div"),i=document.createElement("label");i.innerHTML="Name of Establishment:",i.setAttribute("for","newPlaceName"),o.append(i);var s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("name","newPlaceName"),s.setAttribute("id","newPlaceName"),o.append(s),r.append(o);var u=document.createElement("div"),c=document.createElement("label");c.innerHTML="Rating:",c.setAttribute("for","newPlaceRating"),u.append(c);var l=document.createElement("input");l.setAttribute("type","number"),l.setAttribute("name","newPlaceRating"),l.setAttribute("id","newPlaceRating"),u.append(l),r.append(u);var d=document.createElement("div"),m=document.createElement("label");m.innerHTML="Comments:",m.setAttribute("for","newPlaceComments"),d.append(m);var p=document.createElement("textarea");p.setAttribute("name","newPlaceComments"),p.setAttribute("id","newPlaceComments"),p.setAttribute("rows","8"),d.append(p),r.append(d);var f=document.createElement("button");return f.setAttribute("type","submit"),f.innerHTML="Submit",r.append(f),e.append(r),e};document.addEventListener("DOMContentLoaded",function(e){initMap(),fetchNeighborhoods(),fetchCuisines()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJuZXdNYXAiLCJkYiIsIm1hcmtlcnMiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJEQkhlbHBlciIsImVycm9yIiwic2VsZiIsImZpbGxOZWlnaGJvcmhvb2RzSFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInZhbHVlIiwiYXBwZW5kIiwiZmV0Y2hDdWlzaW5lcyIsImZpbGxDdWlzaW5lc0hUTUwiLCJjdWlzaW5lIiwiaW5pdE1hcCIsIkwiLCJtYXAiLCJjZW50ZXIiLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwidGlsZUxheWVyIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiaWQiLCJhZGRUbyIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtYXJrZXIiLCJyZW1vdmUiLCJ1bCIsInJlc3RhdXJhbnQiLCJjcmVhdGVSZXN0YXVyYW50SFRNTCIsImNyZWF0ZUZvcm0iLCJhZGRNYXJrZXJzVG9NYXAiLCJhcnQiLCJpbWFnZSIsImNsYXNzTmFtZSIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImFsdCIsImltYWdlQWx0Zm9yUmVzdGF1cmFudCIsImhlYWRlciIsIm5hbWUiLCJhcHBlbmRDaGlsZCIsImFkZHJlc3MiLCJtb3JlIiwiaHJlZiIsInVybEZvclJlc3RhdXJhbnQiLCJzZXRBdHRyaWJ1dGUiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50Iiwib25DbGljayIsIndpbmRvdyIsImxvY2F0aW9uIiwib3B0aW9ucyIsInVybCIsIm9uIiwiZSIsImFsZXJ0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImtleUNvZGUiLCJwdXNoIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW0iLCJzdWJtaXRFbnRyeSIsImZvcm0iLCJhcnRpY2xlIiwiaGVhZGluZyIsInN1YmhlYWRpbmciLCJkaXYxIiwibGFiZWwxIiwiaW5wdXQxIiwiZGl2MiIsImxhYmVsMiIsImlucHV0MiIsImRpdjMiLCJsYWJlbDMiLCJpbnB1dDMiLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxZQUNGQyxjQUNBQyxTQUNBQyxPQUVBQyxHQURBQyxRQUFVLEdBTVJDLG1CQUFxQixXQUN2QkMsU0FBU0QsbUJBQW1CLFNBQUNFLEVBQU9QLEdBQzlCTyxJQUlGQyxLQUFLUixjQUFnQkEsRUFDckJTLDRCQVFGQSxzQkFBd0IsV0FBd0MsSUFBdkNULEVBQXVDLEVBQUFVLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUF2QkYsS0FBS1IsY0FDMUNhLEVBQVNDLFNBQVNDLGVBQWUsd0JBQ3ZDZixFQUFjZ0IsUUFBUSxTQUFBQyxHQUNwQixJQUFNQyxFQUFTSixTQUFTSyxjQUFjLFVBQ3RDRCxFQUFPRSxVQUFZSCxFQUNuQkMsRUFBT0csTUFBUUosRUFDZkosRUFBT1MsT0FBT0osTUFPZEssY0FBZ0IsV0FDbEJqQixTQUFTaUIsY0FBYyxTQUFDaEIsRUFBT04sR0FDekJNLElBSUZDLEtBQUtQLFNBQVdBLEVBQ2hCdUIsdUJBUUZBLGlCQUFtQixXQUE4QixJQUE3QnZCLEVBQTZCLEVBQUFTLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFsQkYsS0FBS1AsU0FDaENZLEVBQVNDLFNBQVNDLGVBQWUsbUJBRXZDZCxFQUFTZSxRQUFRLFNBQUFTLEdBQ2YsSUFBTVAsRUFBU0os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QUMxQndCLEVBQUtyRSxPQUFPdUUsR0FFWlQsRUFBSzlELE9BQU9xRSxHQUdaLElBQU1HLEVBQU9oRixTQUFTSyxjQUFjLE9BRTlCNEUsRUFBU2pGLFNBQVNLLGNBQWMsU0FDdEM0RSxFQUFPM0UsVUFBWSxZQUNuQjJFLEVBQU81QixhQUFhLE1BQU8sb0JBQzNCMkIsRUFBS3hFLE9BQU95RSxHQUVaLElBQU1DLEVBQVNsRixTQUFTSyxjQUFjLFlBQ3RDNkUsRUFBTzdCLGFBQWEsT0FBUSxvQkFDNUI2QixFQUFPN0IsYUFBYSxLQUFNLG9CQUMxQjZCLEVBQU83QixhQUFhLE9BQVEsS0FDNUIyQixFQUFLeEUsT0FBTzBFLEdBRVpaLEVBQUs5RCxPQUFPd0UsR0FHWixJQUFNRyxFQUFTbkYsU0FBU0ssY0FBYyxVQVF0QyxPQVBBOEUsRUFBTzlCLGFBQWEsT0FBUSxVQUM1QjhCLEVBQU83RSxVQUFZLFNBRW5CZ0UsRUFBSzlELE9BQU8yRSxHQUVaWixFQUFRL0QsT0FBTzhELEdBRVJDLEdBTVR2RSxTQUFTb0YsaUJBQWlCLG1CQUFvQixTQUFBckIsR0FDNUNuRCxVQUNBckIscUJBQ0FrQiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50cyxcclxuICBuZWlnaGJvcmhvb2RzLFxyXG4gIGN1aXNpbmVzLFxyXG4gIG5ld01hcCxcclxuICBtYXJrZXJzID0gW10sXHJcbiAgZGJcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyBhbmQgc2V0IHRoZWlyIEhUTUwuXHJcbiAqL1xyXG5sZXQgZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICAvLyBHb3QgYW4gZXJyb3JcclxuICAgICAgLy8gY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYubmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHNcclxuICAgICAgZmlsbE5laWdoYm9yaG9vZHNIVE1MKClcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IG5laWdoYm9yaG9vZHMgSFRNTC5cclxuICovXHJcbmxldCBmaWxsTmVpZ2hib3Job29kc0hUTUwgPSAobmVpZ2hib3Job29kcyA9IHNlbGYubmVpZ2hib3Job29kcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpXHJcbiAgbmVpZ2hib3Job29kcy5mb3JFYWNoKG5laWdoYm9yaG9vZCA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKVxyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IG5laWdoYm9yaG9vZFxyXG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kXHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbilcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIGN1aXNpbmVzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmxldCBmZXRjaEN1aXNpbmVzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoQ3Vpc2luZXMoKGVycm9yLCBjdWlzaW5lcykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgLy8gY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lc1xyXG4gICAgICBmaWxsQ3Vpc2luZXNIVE1MKClcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IGN1aXNpbmVzIEhUTUwuXHJcbiAqL1xyXG5sZXQgZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHNlbGYuY3Vpc2luZXMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0JylcclxuXHJcbiAgY3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZVxyXG4gICAgb3B0aW9uLnZhbHVlID0gY3Vpc2luZVxyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pXHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgbGVhZmxldCBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG5sZXQgaW5pdE1hcCA9ICgpID0+IHtcclxuICBzZWxmLm5ld01hcCA9IEwubWFwKCdtYXAnLCB7XHJcbiAgICBjZW50ZXI6IFs0MC43MjIyMTYsIC03My45ODc1MDFdLFxyXG4gICAgem9vbTogMTIsXHJcbiAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXHJcbiAgfSlcclxuICBMLnRpbGVMYXllcihcclxuICAgICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0uanBnNzA/YWNjZXNzX3Rva2VuPXttYXBib3hUb2tlbn0nLFxyXG4gICAge1xyXG4gICAgICBtYXBib3hUb2tlbjpcclxuICAgICAgICAncGsuZXlKMUlqb2lZbkpoWkhsMFptOXlaQ0lzSW1FaU9pSmphbWx5ZFRWblpuZ3dNWGxoTTNkeGJURTJOek5oYldOakluMC52UDU0VHJ1d1BvUFdRTFlaZFBLY3VnJyxcclxuICAgICAgbWF4Wm9vbTogMTgsXHJcbiAgICAgIGlkOiAnbWFwYm94LnN0cmVldHMnXHJcbiAgICB9XHJcbiAgKS5hZGRUbyhuZXdNYXApXHJcblxyXG4gIHVwZGF0ZVJlc3RhdXJhbnRzKClcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMuXHJcbiAqL1xyXG5sZXQgdXBkYXRlUmVzdGF1cmFudHMgPSAoKSA9PiB7XHJcbiAgY29uc3QgY1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKVxyXG4gIGNvbnN0IG5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKVxyXG5cclxuICBjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXhcclxuICBjb25zdCBuSW5kZXggPSBuU2VsZWN0LnNlbGVjdGVkSW5kZXhcclxuXHJcbiAgY29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY0luZGV4XS52YWx1ZVxyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZVxyXG5cclxuICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoXHJcbiAgICBjdWlzaW5lLFxyXG4gICAgbmVpZ2hib3Job29kLFxyXG4gICAgKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXNldFJlc3RhdXJhbnRzKHJlc3RhdXJhbnRzKVxyXG4gICAgICAgIGZpbGxSZXN0YXVyYW50c0hUTUwoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKVxyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxubGV0IHJlc2V0UmVzdGF1cmFudHMgPSByZXN0YXVyYW50cyA9PiB7XHJcbiAgLy8gUmVtb3ZlIGFsbCByZXN0YXVyYW50c1xyXG4gIHNlbGYucmVzdGF1cmFudHMgPSBbXVxyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKVxyXG4gIHVsLmlubmVySFRNTCA9ICcnXHJcblxyXG4gIC8vIFJlbW92ZSBhbGwgbWFwIG1hcmtlcnNcclxuICBpZiAoc2VsZi5tYXJrZXJzKSB7XHJcbiAgICBzZWxmLm1hcmtlcnMuZm9yRWFjaChtYXJrZXIgPT4gbWFya2VyLnJlbW92ZSgpKVxyXG4gIH1cclxuICBzZWxmLm1hcmtlcnMgPSBbXVxyXG4gIHNlbGYucmVzdGF1cmFudHMgPSByZXN0YXVyYW50c1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUganBnYWdlLlxyXG4gKi9cclxubGV0IGZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpXHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIHVsLmFwcGVuZChjcmVhdGVSZXN0YXVyYW50SFRNTChyZXN0YXVyYW50KSlcclxuICB9KVxyXG4gIHVsLmFwcGVuZChjcmVhdGVGb3JtKCkpXHJcblxyXG4gIGFkZE1hcmtlcnNUb01hcCgpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxyXG4gKi9cclxubGV0IGNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gcmVzdGF1cmFudCA9PiB7XHJcbiAgY29uc3QgYXJ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXJ0aWNsZScpXHJcblxyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnXHJcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXHJcbiAgaW1hZ2UuYWx0ID0gREJIZWxwZXIuaW1hZ2VBbHRmb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXHJcbiAgYXJ0LmFwcGVuZChpbWFnZSlcclxuXHJcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJylcclxuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKVxyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lXHJcbiAgaGVhZGVyLmFwcGVuZENoaWxkKG5hbWUpXHJcbiAgYXJ0LmFwcGVuZChoZWFkZXIpXHJcblxyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxyXG4gIG5laWdoYm9yaG9vZC5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5laWdoYm9yaG9vZFxyXG4gIGFydC5hcHBlbmQobmVpZ2hib3Job29kKVxyXG5cclxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3NcclxuICBhcnQuYXBwZW5kKGFkZHJlc3MpXHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICBtb3JlLmlubmVySFRNTCA9ICdWaWV3IERldGFpbHMnXHJcbiAgbW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KVxyXG4gIG1vcmUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpXHJcblxyXG4gIGFydC5hcHBlbmQobW9yZSlcclxuXHJcbiAgcmV0dXJuIGFydFxyXG59XHJcblxyXG4vKipcclxuICogQWRkIG1hcmtlcnMgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMgdG8gdGhlIG1hcC5cclxuICovXHJcbmxldCBhZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm5ld01hcClcclxuICAgIG1hcmtlci5vbignY2xpY2snLCBvbkNsaWNrKVxyXG4gICAgZnVuY3Rpb24gb25DbGljaygpIHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIub3B0aW9ucy51cmxcclxuICAgIH1cclxuICAgIG1hcmtlci5vbigna2V5ZG93bicsIGUgPT4ge1xyXG4gICAgICBhbGVydCgpXHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIG9uQ2xpY2soKVxyXG4gICAgfSlcclxuICAgIHNlbGYubWFya2Vycy5wdXNoKG1hcmtlcilcclxuICB9KVxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZy5sZWFmbGV0LW1hcmtlci1pY29uJykuZm9yRWFjaChlbGVtID0+IHtcclxuICAgIGVsZW0uc2V0QXR0cmlidXRlKCdyb2xlJywgJ2xpbmsnKVxyXG4gIH0pXHJcbn1cclxuXHJcbmxldCBzdWJtaXRFbnRyeSA9IChmb3JtKSA9PiB7fVxyXG5cclxubGV0IGNyZWF0ZUZvcm0gPSAoKSA9PiB7XHJcbiAgY29uc3QgYXJ0aWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2FydGljbGUnKVxyXG4gIGFydGljbGUuc2V0QXR0cmlidXRlKCdpZCcsICdmb3JtLXRpbGUnKVxyXG5cclxuICAvL0hlYWRlclxyXG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWRlcicpXHJcbiAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJylcclxuICBoZWFkaW5nLmlubmVySFRNTCA9ICdNaXNzaW5nIHlvdXIgZmF2b3JpdGUgc3BvdD8nXHJcbiAgaGVhZGVyLmFwcGVuZChoZWFkaW5nKVxyXG4gIGNvbnN0IHN1YmhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpXHJcbiAgc3ViaGVhZGluZy5pbm5lckhUTUwgPSAnQWRkIGEgcmVzdGF1cmFudCB0byBvdXIgbGlzdGluZ3MgYmVsb3cuJ1xyXG4gIGhlYWRlci5hcHBlbmQoc3ViaGVhZGluZylcclxuICBhcnRpY2xlLmFwcGVuZChoZWFkZXIpXHJcblxyXG4gIC8vRm9ybVxyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJylcclxuICBmb3JtLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgJ2phdmFzY3JpcHQ6dm9pZCgwKScpXHJcbiAgZm9ybS5zZXRBdHRyaWJ1dGUoJ29uc3VibWl0JywgJ3N1Ym1pdEVudHJ5KHRoaXMpJylcclxuXHJcbiAgLy9GaXJzdCBJbnB1dFxyXG4gIGNvbnN0IGRpdjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cclxuICBjb25zdCBsYWJlbDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXHJcbiAgbGFiZWwxLmlubmVySFRNTCA9ICdOYW1lIG9mIEVzdGFibGlzaG1lbnQ6J1xyXG4gIGxhYmVsMS5zZXRBdHRyaWJ1dGUoJ2ZvcicsICduZXdQbGFjZU5hbWUnKVxyXG4gIGRpdjEuYXBwZW5kKGxhYmVsMSlcclxuXHJcbiAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxyXG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpXHJcbiAgaW5wdXQxLnNldEF0dHJpYnV0ZSgnbmFtZScsICduZXdQbGFjZU5hbWUnKVxyXG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ25ld1BsYWNlTmFtZScpXHJcbiAgZGl2MS5hcHBlbmQoaW5wdXQxKVxyXG5cclxuICBmb3JtLmFwcGVuZChkaXYxKVxyXG5cclxuICAvL1NlY29uZCBJbnB1dFxyXG4gIGNvbnN0IGRpdjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cclxuICBjb25zdCBsYWJlbDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXHJcbiAgbGFiZWwyLmlubmVySFRNTCA9ICdSYXRpbmc6J1xyXG4gIGxhYmVsMi5zZXRBdHRyaWJ1dGUoJ2ZvcicsICduZXdQbGFjZVJhdGluZycpXHJcbiAgZGl2Mi5hcHBlbmQobGFiZWwyKVxyXG5cclxuICBjb25zdCBpbnB1dDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXHJcbiAgaW5wdXQyLnNldEF0dHJpYnV0ZSgndHlwZScsICdudW1iZXInKVxyXG4gIGlucHV0Mi5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnbmV3UGxhY2VSYXRpbmcnKVxyXG4gIGlucHV0Mi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ25ld1BsYWNlUmF0aW5nJylcclxuICBkaXYyLmFwcGVuZChpbnB1dDIpXHJcblxyXG4gIGZvcm0uYXBwZW5kKGRpdjIpXHJcblxyXG4gIC8vTGFzdCBVc2VyIElucHV0XHJcbiAgY29uc3QgZGl2MyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcblxyXG4gIGNvbnN0IGxhYmVsMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJylcclxuICBsYWJlbDMuaW5uZXJIVE1MID0gJ0NvbW1lbnRzOidcclxuICBsYWJlbDMuc2V0QXR0cmlidXRlKCdmb3InLCAnbmV3UGxhY2VDb21tZW50cycpXHJcbiAgZGl2My5hcHBlbmQobGFiZWwzKVxyXG5cclxuICBjb25zdCBpbnB1dDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXHJcbiAgaW5wdXQzLnNldEF0dHJpYnV0ZSgnbmFtZScsICduZXdQbGFjZUNvbW1lbnRzJylcclxuICBpbnB1dDMuc2V0QXR0cmlidXRlKCdpZCcsICduZXdQbGFjZUNvbW1lbnRzJylcclxuICBpbnB1dDMuc2V0QXR0cmlidXRlKCdyb3dzJywgJzgnKVxyXG4gIGRpdjMuYXBwZW5kKGlucHV0MylcclxuXHJcbiAgZm9ybS5hcHBlbmQoZGl2MylcclxuXHJcbiAgLy9zdWJtaXQgYnV0dG9uXHJcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ3N1Ym1pdCcpXHJcbiAgYnV0dG9uLmlubmVySFRNTCA9ICdTdWJtaXQnXHJcblxyXG4gIGZvcm0uYXBwZW5kKGJ1dHRvbilcclxuXHJcbiAgYXJ0aWNsZS5hcHBlbmQoZm9ybSlcclxuXHJcbiAgcmV0dXJuIGFydGljbGVcclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIG5laWdoYm9yaG9vZHMgYW5kIGN1aXNpbmVzIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxyXG4gKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGV2ZW50ID0+IHtcclxuICBpbml0TWFwKCkgLy8gYWRkZWRcclxuICBmZXRjaE5laWdoYm9yaG9vZHMoKVxyXG4gIGZldGNoQ3Vpc2luZXMoKVxyXG59KSJdfQ==
