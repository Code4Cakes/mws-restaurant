"use strict";var restaurants,neighborhoods,cuisines,newMap,db,markers=[],fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,n){e||(self.neighborhoods=n,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,t=document.getElementById("neighborhoods-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,n){e||(self.cuisines=n,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,t=document.getElementById("cuisines-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},initMap=function(){self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYnJhZHl0Zm9yZCIsImEiOiJjamlydTVnZngwMXlhM3dxbTE2NzNhbWNjIn0.vP54TruwPoPWQLYZdPKcug",maxZoom:18,id:"mapbox.streets"}).addTo(newMap),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),n=document.getElementById("neighborhoods-select"),t=e.selectedIndex,r=n.selectedIndex,a=e[t].value,o=n[r].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(a,o,function(e,n){e||(resetRestaurants(n),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(function(e){return e.remove()}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,n=document.getElementById("restaurants-list");e.forEach(function(e){n.append(createRestaurantHTML(e))}),addMarkersToMap()},createRestaurantHTML=function(e){var n=document.createElement("article"),t=document.createElement("img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e),t.alt=DBHelper.imageAltforRestaurant(e),n.append(t);var r=document.createElement("header"),a=document.createElement("h2");a.innerHTML=e.name,r.appendChild(a),n.append(r);var o=document.createElement("p");o.innerHTML=e.neighborhood,n.append(o);var s=document.createElement("p");s.innerHTML=e.address,n.append(s);var i=document.createElement("a");return i.innerHTML="View Details",i.href=DBHelper.urlForRestaurant(e),i.setAttribute("role","button"),n.append(i),n},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var n=DBHelper.mapMarkerForRestaurant(e,self.newMap);function t(){window.location.href=n.options.url}n.on("click",t),n.on("keydown",function(e){alert(),event.preventDefault(),13===e.keyCode&&t()}),self.markers.push(n)}),document.querySelectorAll("img.leaflet-marker-icon").forEach(function(e){e.setAttribute("role","link")})};document.addEventListener("DOMContentLoaded",function(e){initMap(),fetchNeighborhoods(),fetchCuisines()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJuZXdNYXAiLCJkYiIsIm1hcmtlcnMiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJEQkhlbHBlciIsImVycm9yIiwic2VsZiIsImZpbGxOZWlnaGJvcmhvb2RzSFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInZhbHVlIiwiYXBwZW5kIiwiZmV0Y2hDdWlzaW5lcyIsImZpbGxDdWlzaW5lc0hUTUwiLCJjdWlzaW5lIiwiaW5pdE1hcCIsIkwiLCJtYXAiLCJjZW50ZXIiLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwidGlsZUxheWVyIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiaWQiLCJhZGRUbyIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtYXJrZXIiLCJyZW1vdmUiLCJ1bCIsInJlc3RhdXJhbnQiLCJjcmVhdGVSZXN0YXVyYW50SFRNTCIsImFkZE1hcmtlcnNUb01hcCIsImFydCIsImltYWdlIiwiY2xhc3NOYW1lIiwic3JjIiwiaW1hZ2VVcmxGb3JSZXN0YXVyYW50IiwiYWx0IiwiaW1hZ2VBbHRmb3JSZXN0YXVyYW50IiwiaGVhZGVyIiwibmFtZSIsImFwcGVuZENoaWxkIiwiYWRkcmVzcyIsIm1vcmUiLCJocmVmIiwidXJsRm9yUmVzdGF1cmFudCIsInNldEF0dHJpYnV0ZSIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJvbkNsaWNrIiwid2luZG93IiwibG9jYXRpb24iLCJvcHRpb25zIiwidXJsIiwib24iLCJlIiwiYWxlcnQiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwia2V5Q29kZSIsInB1c2giLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxlbSIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLFlBQ0ZDLGNBQ0FDLFNBQ0FDLE9BRUFDLEdBREFDLFFBQVUsR0FNUkMsbUJBQXFCLFdBQ3ZCQyxTQUFTRCxtQkFBbUIsU0FBQ0UsRUFBT1AsR0FDOUJPLElBSUZDLEtBQUtSLGNBQWdCQSxFQUNyQlMsNEJBUUZBLHNCQUF3QixXQUF3QyxJQUF2Q1QsRUFBdUMsRUFBQVUsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQXZCRixLQUFLUixjQUMxQ2EsRUFBU0MsU0FBU0MsZUFBZSx3QkFDdkNmLEVBQWNnQixRQUFRLFNBQUFDLEdBQ3BCLElBQU1DLEVBQVNKLFNBQVNLLGNBQWMsVUFDdENELEVBQU9FLFVBQVlILEVBQ25CQyxFQUFPRyxNQUFRSixFQUNmSixFQUFPUyxPQUFPSixNQU9kSyxjQUFnQixXQUNsQmpCLFNBQVNpQixjQUFjLFNBQUNoQixFQUFPTixHQUN6Qk0sSUFJRkMsS0FBS1AsU0FBV0EsRUFDaEJ1Qix1QkFRRkEsaUJBQW1CLFdBQThCLElBQTdCdkIsRUFBNkIsRUFBQVMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQWxCRixLQUFLUCxTQUNoQ1ksRUFBU0MsU0FBU0MsZUFBZSxtQkFFdkNkLEVBQVNlLFFBQVEsU0FBQVMsR0FDZixJQUFNUCxFQUFTSixTQUFTSyxjQUFjLFVBQ3RDRCxFQUFPRSxVQUFZSyxFQUNuQlAsRUFBT0csTUFBUUksRUFDZlosRUFBT1MsT0FBT0osTUFPZFEsUUFBVSxXQUNabEIsS0FBS04sT0FBU3lCLEVBQUVDLElBQUksTUFBTyxDQUN6QkMsT0FBUSxDQUFDLFdBQVksV0FDckJDLEtBQU0sR0FDTkMsaUJBQWlCLElBRW5CSixFQUFFSyxVQUNBLG9GQUNBLENBQ0VDLFlBQ0UsZ0dBQ0ZDLFFBQVMsR0FDVEMsR0FBSSxtQkFFTkMsTUFBTWxDLFFBRVJtQyxxQkFNRUEsa0JBQW9CLFdBQ3RCLElBQU1DLEVBQVV4QixTQUFTQyxlQUFlLG1CQUNsQ3dCLEVBQVV6QixTQUFTQyxlQUFlLHdCQUVsQ3lCLEVBQVNGLEVBQVFHLGNBQ2pCQyxFQUFTSCxFQUFRRSxjQUVqQmhCLEVBQVVhLEVBQVFFLEdBQVFuQixNQUMxQkosRUFBZXNCLEVBQVFHLEdBQVFyQixNQUVyQ2YsU0FBU3FDLHdDQUNQbEIsRUFDQVIsRUFDQSxTQUFDVixFQUFPUixHQUNGUSxJQUlGcUMsaUJBQWlCN0MsR0FDakI4QywwQkFTSkQsaUJBQW1CLFNBQUE3QyxHQUVyQlMsS0FBS1QsWUFBYyxHQUNSZSxTQUFTQyxlQUFlLG9CQUNoQ0ssVUFBWSxHQUdYWixLQUFLSixTQUNQSSxLQUFLSixRQUFRWSxRQUFRLFNBQUE4QixHQUFNLE9BQUlBLEVBQU9DLFdBRXhDdkMsS0FBS0osUUFBVSxHQUNmSSxLQUFLVCxZQUFjQSxHQU1qQjhDLG9CQUFzQixXQUFvQyxJQUFuQzlDLEVBQW1DLEVBQUFXLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFyQkYsS0FBS1QsWUFDdENpRCxFQUFLbEMsU0FBU0MsZUFBZSxvQkFDbkNoQixFQUFZaUIsUUFBUSxTQUFBaUMsR0FDbEJELEVBQUcxQixPQUFPNEIscUJBQXFCRCxNQUVqQ0UsbUJBTUVELHFCQUF1QixTQUFBRCxHQUN6QixJQUFNRyxFQUFNdEMsU0FBU0ssY0FBYyxXQUU3QmtDLEVBQVF2QyxTQUFTSyxjQUFjLE9BQ3JDa0MsRUFBTUMsVUFBWSxpQkFDbEJELEVBQU1FLElBQU1qRCxTQUFTa0Qsc0JBQXNCUCxHQUMzQ0ksRUFBTUksSUFBTW5ELFNBQVNvRCxzQkFBc0JULEdBQzNDRyxFQUFJOUIsT0FBTytCLEdBRVgsSUFBTU0sRUFBUzdDLFNBQVNLLGNBQWMsVUFDaEN5QyxFQUFPOUMsU0FBU0ssY0FBYyxNQUNwQ3lDLEVBQUt4QyxVQUFZNkIsRUFBV1csS0FDNUJELEVBQU9FLFlBQVlELEdBQ25CUixFQUFJOUIsT0FBT3FDLEdBRVgsSUFBTTFDLEVBQWVILFNBQVNLLGNBQWMsS0FDNUNGLEVBQWFHLFVBQVk2QixFQUFXaEMsYUFDcENtQyxFQUFJOUIsT0FBT0wsR0FFWCxJQUFNNkMsRUFBVWhELFNBQVNLLGNBQWMsS0FDdkMyQyxFQUFRMUMsVUFBWTZCLEVBQVdhLFFBQy9CVixFQUFJOUIsT0FBT3dDLEdBRVgsSUFBTUMsRUFBT2pELFNBQVNLLGNBQWMsS0FPcEMsT0FOQTRDLEVBQUszQyxVQUFZLGVBQ2pCMkMsRUFBS0MsS0FBTzFELFNBQVMyRCxpQkFBaUJoQixHQUN0Q2MsRUFBS0csYUFBYSxPQUFRLFVBRTFCZCxFQUFJOUIsT0FBT3lDLEdBRUpYLEdBTUxELGdCQUFrQixZQUFvQyxFQUFBekMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQXJCRixLQUFLVCxhQUM1QmlCLFFBQVEsU0FBQWlDLEdBRWxCLElBQU1ILEVBQVN4QyxTQUFTNkQsdUJBQXVCbEIsRUFBWXpDLEtBQUtOLFFBRWhFLFNBQVNrRSxJQUNQQyxPQUFPQyxTQUFTTixLQUFPbEIsRUFBT3lCLFFBQVFDLElBRnhDMUIsRUFBTzJCLEdBQUcsUUFBU0wsR0FJbkJ0QixFQUFPMkIsR0FBRyxVQUFXLFNBQUFDLEdBQ25CQyxRQUNBQyxNQUFNQyxpQkFDWSxLQUFkSCxFQUFFSSxTQUFnQlYsTUFFeEI1RCxLQUFLSixRQUFRMkUsS0FBS2pDLEtBRXBCaEMsU0FBU2tFLGlCQUFpQiwyQkFBMkJoRSxRQUFRLFNBQUFpRSxHQUMzREEsRUFBS2YsYUFBYSxPQUFRLFdBTzlCcEQsU0FBU29FLGlCQUFpQixtQkFBb0IsU0FBQU4sR0FDNUNsRCxVQUNBckIscUJBQ0FrQiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50cyxcclxuICBuZWlnaGJvcmhvb2RzLFxyXG4gIGN1aXNpbmVzLFxyXG4gIG5ld01hcCxcclxuICBtYXJrZXJzID0gW10sXHJcbiAgZGJcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyBhbmQgc2V0IHRoZWlyIEhUTUwuXHJcbiAqL1xyXG5sZXQgZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICAvLyBHb3QgYW4gZXJyb3JcclxuICAgICAgLy8gY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYubmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHNcclxuICAgICAgZmlsbE5laWdoYm9yaG9vZHNIVE1MKClcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IG5laWdoYm9yaG9vZHMgSFRNTC5cclxuICovXHJcbmxldCBmaWxsTmVpZ2hib3Job29kc0hUTUwgPSAobmVpZ2hib3Job29kcyA9IHNlbGYubmVpZ2hib3Job29kcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpXHJcbiAgbmVpZ2hib3Job29kcy5mb3JFYWNoKG5laWdoYm9yaG9vZCA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKVxyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IG5laWdoYm9yaG9vZFxyXG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kXHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbilcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIGN1aXNpbmVzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmxldCBmZXRjaEN1aXNpbmVzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoQ3Vpc2luZXMoKGVycm9yLCBjdWlzaW5lcykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgLy8gY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lc1xyXG4gICAgICBmaWxsQ3Vpc2luZXNIVE1MKClcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IGN1aXNpbmVzIEhUTUwuXHJcbiAqL1xyXG5sZXQgZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHNlbGYuY3Vpc2luZXMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0JylcclxuXHJcbiAgY3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZVxyXG4gICAgb3B0aW9uLnZhbHVlID0gY3Vpc2luZVxyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pXHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgbGVhZmxldCBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG5sZXQgaW5pdE1hcCA9ICgpID0+IHtcclxuICBzZWxmLm5ld01hcCA9IEwubWFwKCdtYXAnLCB7XHJcbiAgICBjZW50ZXI6IFs0MC43MjIyMTYsIC03My45ODc1MDFdLFxyXG4gICAgem9vbTogMTIsXHJcbiAgICBzY3JvbGxXaGVlbFpvb206IGZhbHNlXHJcbiAgfSlcclxuICBMLnRpbGVMYXllcihcclxuICAgICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0uanBnNzA/YWNjZXNzX3Rva2VuPXttYXBib3hUb2tlbn0nLFxyXG4gICAge1xyXG4gICAgICBtYXBib3hUb2tlbjpcclxuICAgICAgICAncGsuZXlKMUlqb2lZbkpoWkhsMFptOXlaQ0lzSW1FaU9pSmphbWx5ZFRWblpuZ3dNWGxoTTNkeGJURTJOek5oYldOakluMC52UDU0VHJ1d1BvUFdRTFlaZFBLY3VnJyxcclxuICAgICAgbWF4Wm9vbTogMTgsXHJcbiAgICAgIGlkOiAnbWFwYm94LnN0cmVldHMnXHJcbiAgICB9XHJcbiAgKS5hZGRUbyhuZXdNYXApXHJcblxyXG4gIHVwZGF0ZVJlc3RhdXJhbnRzKClcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMuXHJcbiAqL1xyXG5sZXQgdXBkYXRlUmVzdGF1cmFudHMgPSAoKSA9PiB7XHJcbiAgY29uc3QgY1NlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKVxyXG4gIGNvbnN0IG5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKVxyXG5cclxuICBjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXhcclxuICBjb25zdCBuSW5kZXggPSBuU2VsZWN0LnNlbGVjdGVkSW5kZXhcclxuXHJcbiAgY29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY0luZGV4XS52YWx1ZVxyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZVxyXG5cclxuICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoXHJcbiAgICBjdWlzaW5lLFxyXG4gICAgbmVpZ2hib3Job29kLFxyXG4gICAgKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXNldFJlc3RhdXJhbnRzKHJlc3RhdXJhbnRzKVxyXG4gICAgICAgIGZpbGxSZXN0YXVyYW50c0hUTUwoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKVxyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxubGV0IHJlc2V0UmVzdGF1cmFudHMgPSByZXN0YXVyYW50cyA9PiB7XHJcbiAgLy8gUmVtb3ZlIGFsbCByZXN0YXVyYW50c1xyXG4gIHNlbGYucmVzdGF1cmFudHMgPSBbXVxyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKVxyXG4gIHVsLmlubmVySFRNTCA9ICcnXHJcblxyXG4gIC8vIFJlbW92ZSBhbGwgbWFwIG1hcmtlcnNcclxuICBpZiAoc2VsZi5tYXJrZXJzKSB7XHJcbiAgICBzZWxmLm1hcmtlcnMuZm9yRWFjaChtYXJrZXIgPT4gbWFya2VyLnJlbW92ZSgpKVxyXG4gIH1cclxuICBzZWxmLm1hcmtlcnMgPSBbXVxyXG4gIHNlbGYucmVzdGF1cmFudHMgPSByZXN0YXVyYW50c1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUganBnYWdlLlxyXG4gKi9cclxubGV0IGZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpXHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIHVsLmFwcGVuZChjcmVhdGVSZXN0YXVyYW50SFRNTChyZXN0YXVyYW50KSlcclxuICB9KVxyXG4gIGFkZE1hcmtlcnNUb01hcCgpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxyXG4gKi9cclxubGV0IGNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gcmVzdGF1cmFudCA9PiB7XHJcbiAgY29uc3QgYXJ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXJ0aWNsZScpXHJcblxyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnXHJcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXHJcbiAgaW1hZ2UuYWx0ID0gREJIZWxwZXIuaW1hZ2VBbHRmb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXHJcbiAgYXJ0LmFwcGVuZChpbWFnZSlcclxuXHJcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJylcclxuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKVxyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lXHJcbiAgaGVhZGVyLmFwcGVuZENoaWxkKG5hbWUpXHJcbiAgYXJ0LmFwcGVuZChoZWFkZXIpXHJcblxyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxyXG4gIG5laWdoYm9yaG9vZC5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5laWdoYm9yaG9vZFxyXG4gIGFydC5hcHBlbmQobmVpZ2hib3Job29kKVxyXG5cclxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3NcclxuICBhcnQuYXBwZW5kKGFkZHJlc3MpXHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICBtb3JlLmlubmVySFRNTCA9ICdWaWV3IERldGFpbHMnXHJcbiAgbW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KVxyXG4gIG1vcmUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpXHJcblxyXG4gIGFydC5hcHBlbmQobW9yZSlcclxuXHJcbiAgcmV0dXJuIGFydFxyXG59XHJcblxyXG4vKipcclxuICogQWRkIG1hcmtlcnMgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMgdG8gdGhlIG1hcC5cclxuICovXHJcbmxldCBhZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm5ld01hcClcclxuICAgIG1hcmtlci5vbignY2xpY2snLCBvbkNsaWNrKVxyXG4gICAgZnVuY3Rpb24gb25DbGljaygpIHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIub3B0aW9ucy51cmxcclxuICAgIH1cclxuICAgIG1hcmtlci5vbigna2V5ZG93bicsIGUgPT4ge1xyXG4gICAgICBhbGVydCgpXHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIG9uQ2xpY2soKVxyXG4gICAgfSlcclxuICAgIHNlbGYubWFya2Vycy5wdXNoKG1hcmtlcilcclxuICB9KVxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZy5sZWFmbGV0LW1hcmtlci1pY29uJykuZm9yRWFjaChlbGVtID0+IHtcclxuICAgIGVsZW0uc2V0QXR0cmlidXRlKCdyb2xlJywgJ2xpbmsnKVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBjdWlzaW5lcyBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBldmVudCA9PiB7XHJcbiAgaW5pdE1hcCgpIC8vIGFkZGVkXHJcbiAgZmV0Y2hOZWlnaGJvcmhvb2RzKClcclxuICBmZXRjaEN1aXNpbmVzKClcclxufSkiXX0=
