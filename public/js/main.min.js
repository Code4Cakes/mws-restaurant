"use strict";var restaurants,neighborhoods,cuisines,newMap,db,markers=[],fetchNeighborhoods=function(){DBHelper.fetchNeighborhoods(function(e,n){e||(self.neighborhoods=n,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.neighborhoods,t=document.getElementById("neighborhoods-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},fetchCuisines=function(){DBHelper.fetchCuisines(function(e,n){e||(self.cuisines=n,fillCuisinesHTML())})},fillCuisinesHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.cuisines,t=document.getElementById("cuisines-select");e.forEach(function(e){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.append(n)})},initMap=function(){self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYnJhZHl0Zm9yZCIsImEiOiJjamlydTVnZngwMXlhM3dxbTE2NzNhbWNjIn0.vP54TruwPoPWQLYZdPKcug",maxZoom:18,id:"mapbox.streets"}).addTo(newMap),updateRestaurants()},updateRestaurants=function(){var e=document.getElementById("cuisines-select"),n=document.getElementById("neighborhoods-select"),t=e.selectedIndex,r=n.selectedIndex,a=e[t].value,o=n[r].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(a,o,function(e,n){e||(resetRestaurants(n),fillRestaurantsHTML())})},resetRestaurants=function(e){self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(function(e){return e.remove()}),self.markers=[],self.restaurants=e},fillRestaurantsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants,n=document.getElementById("restaurants-list");e.forEach(function(e){n.prepend(createRestaurantHTML(e))}),addMarkersToMap()},createRestaurantHTML=function(e){var n=document.createElement("article"),t=document.createElement("img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e),t.alt=DBHelper.imageAltforRestaurant(e),n.append(t);var r=document.createElement("header"),a=document.createElement("h2");a.innerHTML=e.name,r.appendChild(a),n.append(r);var o=document.createElement("p");o.innerHTML=e.neighborhood,n.append(o);var s=document.createElement("p");s.innerHTML=e.address,n.append(s);var i=document.createElement("a");return i.innerHTML="View Details",i.href=DBHelper.urlForRestaurant(e),i.setAttribute("role","button"),n.append(i),n},addMarkersToMap=function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurants).forEach(function(e){var n=DBHelper.mapMarkerForRestaurant(e,self.newMap);function t(){window.location.href=n.options.url}n.on("click",t),n.on("keydown",function(e){alert(),event.preventDefault(),13===e.keyCode&&t()}),self.markers.push(n)}),document.querySelectorAll("img.leaflet-marker-icon").forEach(function(e){e.setAttribute("role","link")})};document.addEventListener("DOMContentLoaded",function(e){initMap(),fetchNeighborhoods(),fetchCuisines()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJuZXdNYXAiLCJkYiIsIm1hcmtlcnMiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJEQkhlbHBlciIsImVycm9yIiwic2VsZiIsImZpbGxOZWlnaGJvcmhvb2RzSFRNTCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInZhbHVlIiwiYXBwZW5kIiwiZmV0Y2hDdWlzaW5lcyIsImZpbGxDdWlzaW5lc0hUTUwiLCJjdWlzaW5lIiwiaW5pdE1hcCIsIkwiLCJtYXAiLCJjZW50ZXIiLCJ6b29tIiwic2Nyb2xsV2hlZWxab29tIiwidGlsZUxheWVyIiwibWFwYm94VG9rZW4iLCJtYXhab29tIiwiaWQiLCJhZGRUbyIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtYXJrZXIiLCJyZW1vdmUiLCJ1bCIsInJlc3RhdXJhbnQiLCJwcmVwZW5kIiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJhZGRNYXJrZXJzVG9NYXAiLCJhcnQiLCJpbWFnZSIsImNsYXNzTmFtZSIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsImFsdCIsImltYWdlQWx0Zm9yUmVzdGF1cmFudCIsImhlYWRlciIsIm5hbWUiLCJhcHBlbmRDaGlsZCIsImFkZHJlc3MiLCJtb3JlIiwiaHJlZiIsInVybEZvclJlc3RhdXJhbnQiLCJzZXRBdHRyaWJ1dGUiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50Iiwib25DbGljayIsIndpbmRvdyIsImxvY2F0aW9uIiwib3B0aW9ucyIsInVybCIsIm9uIiwiZSIsImFsZXJ0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImtleUNvZGUiLCJwdXNoIiwicXVlcnlTZWxlY3RvckFsbCIsImVsZW0iLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxZQUNGQyxjQUNBQyxTQUNBQyxPQUVBQyxHQURBQyxRQUFVLEdBTVJDLG1CQUFxQixXQUN2QkMsU0FBU0QsbUJBQW1CLFNBQUNFLEVBQU9QLEdBQzlCTyxJQUlGQyxLQUFLUixjQUFnQkEsRUFDckJTLDRCQVFGQSxzQkFBd0IsV0FBd0MsSUFBdkNULEVBQXVDLEVBQUFVLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUF2QkYsS0FBS1IsY0FDMUNhLEVBQVNDLFNBQVNDLGVBQWUsd0JBQ3ZDZixFQUFjZ0IsUUFBUSxTQUFBQyxHQUNwQixJQUFNQyxFQUFTSixTQUFTSyxjQUFjLFVBQ3RDRCxFQUFPRSxVQUFZSCxFQUNuQkMsRUFBT0csTUFBUUosRUFDZkosRUFBT1MsT0FBT0osTUFPZEssY0FBZ0IsV0FDbEJqQixTQUFTaUIsY0FBYyxTQUFDaEIsRUFBT04sR0FDekJNLElBSUZDLEtBQUtQLFNBQVdBLEVBQ2hCdUIsdUJBUUZBLGlCQUFtQixXQUE4QixJQUE3QnZCLEVBQTZCLEVBQUFTLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFsQkYsS0FBS1AsU0FDaENZLEVBQVNDLFNBQVNDLGVBQWUsbUJBRXZDZCxFQUFTZSxRQUFRLFNBQUFTLEdBQ2YsSUFBTVAsRUFBU0osU0FBU0ssY0FBYyxVQUN0Q0QsRUFBT0UsVUFBWUssRUFDbkJQLEVBQU9HLE1BQVFJLEVBQ2ZaLEVBQU9TLE9BQU9KLE1BT2RRLFFBQVUsV0FDWmxCLEtBQUtOLE9BQVN5QixFQUFFQyxJQUFJLE1BQU8sQ0FDekJDLE9BQVEsQ0FBQyxXQUFZLFdBQ3JC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Ym9yaG9vZHMsXHJcbiAgY3Vpc2luZXMsXHJcbiAgbmV3TWFwLFxyXG4gIG1hcmtlcnMgPSBbXSxcclxuICBkYlxyXG5cclxuLyoqXHJcbiAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmxldCBmZXRjaE5laWdoYm9yaG9vZHMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hOZWlnaGJvcmhvb2RzKChlcnJvciwgbmVpZ2hib3Job29kcykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIC8vIEdvdCBhbiBlcnJvclxyXG4gICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kc1xyXG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgbmVpZ2hib3Job29kcyBIVE1MLlxyXG4gKi9cclxubGV0IGZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XHJcbiAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0JylcclxuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpXHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kXHJcbiAgICBvcHRpb24udmFsdWUgPSBuZWlnaGJvcmhvb2RcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxubGV0IGZldGNoQ3Vpc2luZXMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzXHJcbiAgICAgIGZpbGxDdWlzaW5lc0hUTUwoKVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgY3Vpc2luZXMgSFRNTC5cclxuICovXHJcbmxldCBmaWxsQ3Vpc2luZXNIVE1MID0gKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKVxyXG5cclxuICBjdWlzaW5lcy5mb3JFYWNoKGN1aXNpbmUgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJylcclxuICAgIG9wdGlvbi5pbm5lckhUTUwgPSBjdWlzaW5lXHJcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lXHJcbiAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbilcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBsZWFmbGV0IG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cclxuICovXHJcbmxldCBpbml0TWFwID0gKCkgPT4ge1xyXG4gIHNlbGYubmV3TWFwID0gTC5tYXAoJ21hcCcsIHtcclxuICAgIGNlbnRlcjogWzQwLjcyMjIxNiwgLTczLjk4NzUwMV0sXHJcbiAgICB6b29tOiAxMixcclxuICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcclxuICB9KVxyXG4gIEwudGlsZUxheWVyKFxyXG4gICAgJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQve2lkfS97en0ve3h9L3t5fS5qcGc3MD9hY2Nlc3NfdG9rZW49e21hcGJveFRva2VufScsXHJcbiAgICB7XHJcbiAgICAgIG1hcGJveFRva2VuOlxyXG4gICAgICAgICdway5leUoxSWpvaVluSmhaSGwwWm05eVpDSXNJbUVpT2lKamFtbHlkVFZuWm5nd01YbGhNM2R4YlRFMk56TmhiV05qSW4wLnZQNTRUcnV3UG9QV1FMWVpkUEtjdWcnLFxyXG4gICAgICBtYXhab29tOiAxOCxcclxuICAgICAgaWQ6ICdtYXBib3guc3RyZWV0cydcclxuICAgIH1cclxuICApLmFkZFRvKG5ld01hcClcclxuXHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50cy5cclxuICovXHJcbmxldCB1cGRhdGVSZXN0YXVyYW50cyA9ICgpID0+IHtcclxuICBjb25zdCBjU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpXHJcbiAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpXHJcblxyXG4gIGNvbnN0IGNJbmRleCA9IGNTZWxlY3Quc2VsZWN0ZWRJbmRleFxyXG4gIGNvbnN0IG5JbmRleCA9IG5TZWxlY3Quc2VsZWN0ZWRJbmRleFxyXG5cclxuICBjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlXHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gblNlbGVjdFtuSW5kZXhdLnZhbHVlXHJcblxyXG4gIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChcclxuICAgIGN1aXNpbmUsXHJcbiAgICBuZWlnaGJvcmhvb2QsXHJcbiAgICAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpXHJcbiAgICAgICAgZmlsbFJlc3RhdXJhbnRzSFRNTCgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICApXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhciBjdXJyZW50IHJlc3RhdXJhbnRzLCB0aGVpciBIVE1MIGFuZCByZW1vdmUgdGhlaXIgbWFwIG1hcmtlcnMuXHJcbiAqL1xyXG5sZXQgcmVzZXRSZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzID0+IHtcclxuICAvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IFtdXHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpXHJcbiAgdWwuaW5uZXJIVE1MID0gJydcclxuXHJcbiAgLy8gUmVtb3ZlIGFsbCBtYXAgbWFya2Vyc1xyXG4gIGlmIChzZWxmLm1hcmtlcnMpIHtcclxuICAgIHNlbGYubWFya2Vycy5mb3JFYWNoKG1hcmtlciA9PiBtYXJrZXIucmVtb3ZlKCkpXHJcbiAgfVxyXG4gIHNlbGYubWFya2VycyA9IFtdXHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYWxsIHJlc3RhdXJhbnRzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSBqcGdhZ2UuXHJcbiAqL1xyXG5sZXQgZmlsbFJlc3RhdXJhbnRzSFRNTCA9IChyZXN0YXVyYW50cyA9IHNlbGYucmVzdGF1cmFudHMpID0+IHtcclxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50cy1saXN0JylcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgdWwucHJlcGVuZChjcmVhdGVSZXN0YXVyYW50SFRNTChyZXN0YXVyYW50KSlcclxuICB9KVxyXG4gIGFkZE1hcmtlcnNUb01hcCgpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxyXG4gKi9cclxubGV0IGNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gcmVzdGF1cmFudCA9PiB7XHJcbiAgY29uc3QgYXJ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXJ0aWNsZScpXHJcblxyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnXHJcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXHJcbiAgaW1hZ2UuYWx0ID0gREJIZWxwZXIuaW1hZ2VBbHRmb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpXHJcbiAgYXJ0LmFwcGVuZChpbWFnZSlcclxuXHJcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZGVyJylcclxuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKVxyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lXHJcbiAgaGVhZGVyLmFwcGVuZENoaWxkKG5hbWUpXHJcbiAgYXJ0LmFwcGVuZChoZWFkZXIpXHJcblxyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxyXG4gIG5laWdoYm9yaG9vZC5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5laWdoYm9yaG9vZFxyXG4gIGFydC5hcHBlbmQobmVpZ2hib3Job29kKVxyXG5cclxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3NcclxuICBhcnQuYXBwZW5kKGFkZHJlc3MpXHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcclxuICBtb3JlLmlubmVySFRNTCA9ICdWaWV3IERldGFpbHMnXHJcbiAgbW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KVxyXG4gIG1vcmUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpXHJcblxyXG4gIGFydC5hcHBlbmQobW9yZSlcclxuXHJcbiAgcmV0dXJuIGFydFxyXG59XHJcblxyXG4vKipcclxuICogQWRkIG1hcmtlcnMgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMgdG8gdGhlIG1hcC5cclxuICovXHJcbmxldCBhZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgcmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuICAgIC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG4gICAgY29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm5ld01hcClcclxuICAgIG1hcmtlci5vbignY2xpY2snLCBvbkNsaWNrKVxyXG4gICAgZnVuY3Rpb24gb25DbGljaygpIHtcclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIub3B0aW9ucy51cmxcclxuICAgIH1cclxuICAgIG1hcmtlci5vbigna2V5ZG93bicsIGUgPT4ge1xyXG4gICAgICBhbGVydCgpXHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIG9uQ2xpY2soKVxyXG4gICAgfSlcclxuICAgIHNlbGYubWFya2Vycy5wdXNoKG1hcmtlcilcclxuICB9KVxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZy5sZWFmbGV0LW1hcmtlci1pY29uJykuZm9yRWFjaChlbGVtID0+IHtcclxuICAgIGVsZW0uc2V0QXR0cmlidXRlKCdyb2xlJywgJ2xpbmsnKVxyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBjdWlzaW5lcyBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cclxuICovXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBldmVudCA9PiB7XHJcbiAgaW5pdE1hcCgpIC8vIGFkZGVkXHJcbiAgZmV0Y2hOZWlnaGJvcmhvb2RzKClcclxuICBmZXRjaEN1aXNpbmVzKClcclxufSkiXX0=
